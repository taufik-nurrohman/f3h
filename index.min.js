/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/f3h>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).F3H=n()}(this,(function(){"use strict";var t=function(t){return Array.isArray(t)},n=function(t){return"function"==typeof t},e=function(t,n){return t&&u(n)&&t instanceof n},r=function(t,n){return void 0===n&&(n=!0),"object"==typeof t&&(!n||e(t,Object))},u=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},o=function(t){return"string"==typeof t},i=function n(e){if(t(e))return e.map((function(t){return n(e)}));if(r(e)){for(var u in e)e[u]=n(e[u]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},f=function(t){return t.toLowerCase()},c=function(t){return t.toUpperCase()},l=function(t){return t.length},s=function(t){return Object.keys(t)},a=function n(e){if(t(e))return e.map((function(t){return n(t)}));if(function(t){return/^-?(?:\d*.)?\d+$/.test(t+"")}(e))return function(t,n){return void 0===n&&(n=10),n?parseInt(t,n):parseFloat(t)}(e);if(r(e)){for(var u in e)e[u]=n(e[u]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},p=document,d=window,h=p.documentElement,v=function(t){var n=y(t),e=k(t),r=E(t);return!1!==e?[r,e,n]:[r,n]},m=function(t,n,e){if(void 0===e&&(e=!0),!w(t,n))return null;var r=t.getAttribute(n);return e?a(r):r},y=function(t,n){void 0===n&&(n=!0);for(var e,r=t.attributes,u={},o=0,i=r.length;o<i;++o)e=r[o].value,u[r[o].name]=n?a(e):e;return u},b=function(t,n){return(n||p).querySelector(t)},g=function(t,n){return(n||p).querySelectorAll(t)},k=function(t,n){void 0===n&&(n=!0);var e="innerHTML";if(!O(t,e))return!1;var r=t[e];return""!==(r=n?r.trim():r)?r:null},E=function(t){return f(t&&t.nodeName||"")||null},H=function(t){return t.nextElementSibling||null},x=function(t){return t.parentNode||null},F=function(t,n){void 0===n&&(n=!0);var e="textContent";if(!O(t,e))return!1;var r=t[e];return""!==(r=n?r.trim():r)?r:null},w=function(t,n){return t.hasAttribute(n)},L=function(t){return null!==x(t)},O=function(t,n){return n in t},S=function(t,n){return t.removeAttribute(n),t},T=function(t){var n=x(t);return t.remove(),n},A=function(t,n,e){return!0===e&&(e=n),t.setAttribute(n,i(e)),t},C=function(t,n){return t.append(n),n},R=function(t,n,e){return t=o(t)?p.createElement(t):t,r(n)&&(e=n,n=!1),o(n)&&q(t,n),r(e)&&function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?A(t,r,e):S(t,r)}(t,e),t},q=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="innerHTML";return O(t,r)&&(t[r]=e?n.trim():n),t},D=function(t,n){return x(t).insertBefore(n,t),n},M=function(t){return R.apply(void 0,t)},N=d.history,B=d.location,P=p.currentScript,U=function(t,n,e){n.removeEventListener(t,e)},$=function(t){return t&&t.preventDefault()},I=function(t,n,e,r){void 0===r&&(r=!1),n.addEventListener(t,e,r)};var J=function(t,n){return function(t){return e(t,RegExp)}(t)?t:(t=t.replace(/\//g,"\\/"),RegExp(t,u(n)?n:"g"))},G=function(t,n){return t.scrollLeft=n[0],t.scrollTop=n[1],t};let K,X,_="F3H",z="GET",Q="document",V="text",W="//"+B.hostname;function Y(t){return ot(t)?"submit":"click"}function Z(t){return t.split("#")[1]||""}function tt(t){let n,e,r,u,o={},i=g("link[rel=dns-prefetch],link[rel=preconnect],link[rel=prefetch],link[rel=preload],link[rel=prerender]",t);for(let t=0,f=l(i);t<f;++t)it(r=i[t])||(e=m(r,"href"),r.id=n=r.id||"F3H:"+pt(e||F(r)),o[n]=u=v(r),e&&(o[n][l(u)-1].href=r.href));return o}function nt(){return at(B.href)}function et(t){let n,e,r,u,o={},i=g("script",t);for(let t=0,f=l(i);t<f;++t)ft(r=i[t])||(e=m(r,"src"),r.id=n=r.id||"F3H:"+pt(e||F(r)),o[n]=u=v(r),e&&(o[n][l(u)-1].src=r.src));return o}function rt(t){let n,e,r,u,o={},i=g("link[rel=stylesheet],style",t);for(let t=0,f=l(i);t<f;++t)lt(r=i[t])||(e=m(r,"href"),r.id=n=r.id||"F3H:"+pt(e||F(r)),o[n]=u=v(r),e&&(o[n][l(u)-1].href=r.href));return o}function ut(t,n){return t?p.getElementById(t)||(n?p.getElementsByName(t)[0]:null):null}function ot(t){return"form"===E(t)}function it(t){let n=f(_);return a(m(t,"data-"+n)||m(t,n))?1:0}function ft(t){if(t.src&&P.src===t.src)return 1;let n=f(_);return a(m(t,"data-"+n)||m(t,n))||J("\\bF3H\\b").test(F(t)||"")?1:0}function ct(t){let n=f(_);return w(t,"data-"+n)||w(t,n)?a(m(t,"data-"+n)||m(t,n))?1:0:1}function lt(t){let n=f(_);return a(m(t,"data-"+n)||m(t,n))?1:0}function st(t){return t.split("#")[0]}function at(t){return t.replace(/\/+(?=[?&#]|$)/,"")}function pt(t){let n,e,r=l(t),u=0;if(0===r)return u;for(e=0;e<r;++e)n=t.charCodeAt(e),u=(u<<5)-u+n,u&=u;return u<1?-1*u:u}function dt(t){let n,e,r,u={},o=t.getAllResponseHeaders().trim().split(/[\r\n]+/);for(n in o)e=o[n].split(": "),r=f(e.shift()),u[r]=a(e.join(": "));return new Proxy(u,{get:(t,n)=>t[f(n)]||null,set:(t,n,e)=>{t[f(n)]=e}})}function ht(t=p,o={}){const i=this;if(!e(i,ht))return new ht(t,o);var f;if(u(t)&&(!1!==(f=t)&&!0!==f)&&!r(t)||(o=t,t=p),t.F3H)return;i.state=o=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return Object.assign.apply(Object,[{}].concat(n))}(ht.state,!0===o?{cache:o}:o||{}),i.source=t,o.turbo&&(o.cache=!0);let a={},v=null,m=null,y=null,k=nt(),E=k,x={},F=null,w=B(o.sources),O=null,S=null,{fire:A,hooks:q}=function(t){var n={};return t.hooks=n,t.fire=function(e,r){return u(n[e])?(n[e].forEach((function(n){return n.apply(t,r)})),t):t},t.off=function(e,r){if(!u(e))return n={},t;if(u(n[e]))if(u(r)){for(var o=0,i=n[e].length;o<i;++o)if(r===n[e][o]){n[e].splice(o,1);break}0===j&&delete n[e]}else delete n[e];return t},t.on=function(e,r){return u(n[e])||(n[e]=[]),u(r)&&n[e].push(r),t},t}(i);function B(t,e){k=nt();let r=g(t,e),u=[];return n(o.is)?r.forEach((t=>{o.is.call(i,t,k)&&ct(t)&&u.push(t)})):r.forEach((t=>{ct(t)&&u.push(t)})),u}function P(t){t!==nt()&&o.history&&N.pushState({},"",t)}function J(t,n,e){let r,u=function(t){return t===d}(t),f=o.history;if(z===n&&t===y&&!u)return;if(y=t,i.ref=at(E=e),A("exit",[p,t]),o.cache){let n=a[at(st(e))];if(n)return i.lot=m=n[2],i.status=O=n[0],n[3]&&!u&&f&&lt(h),P(e),r=[n[1],t],n[3]&&(v=vt(r[0])),n[3]&&(S=yt(r[0])),A("success",r),A(n[0],r),w=B(o.sources),n[3]&&(F=mt(r[0])),Lt(r),void A("enter",r)}let c,l,s=it(t,n,e,o.lot),b=s.upload,g=Q===s.responseType;function k(){m=dt(s),O=s.status,z===n&&o.cache&&O&&(a[at(st(e))]=[O,s.response,m,g]),i.lot=m,i.status=O}return I("abort",s,(()=>{k(),A("abort",[s.response,t])})),I("error",s,c=()=>{k(),g&&!u&&f&&lt(h),r=[s.response,t],g&&(v=vt(r[0])),g&&(S=yt(r[0])),A("error",r),w=B(o.sources),g&&(F=mt(r[0])),Lt(r),A("enter",r)}),I("error",b,c),I("load",s,c=()=>{if(k(),r=[s.response,t],l=s.responseURL,O>=300&&O<400){let t=at(st(l));return a[t]&&delete a[t],A("success",r),A(O,r),void J(y=d,z,l||e)}P(-1===e.indexOf("#")&&l||e),g&&(S=yt(r[0])),A("success",r),A(O,r),g&&f&&lt(h),w=B(o.sources),g&&(F=mt(r[0])),Lt(r),A("enter",r)}),I("load",b,c),I("progress",s,(t=>{k(),A("pull",t.lengthComputable?[t.loaded,t.total]:[0,-1])})),I("progress",b,(t=>{k(),A("push",t.lengthComputable?[t.loaded,t.total]:[0,-1])})),s}function _(t){x[t]&&x[t][0]&&(x[t][0].abort(),delete x[t])}function W(){for(let t in x)_(t)}function it(t,e,u,f){u=n(o.ref)?o.ref.call(i,t,u):u;let l,s=new XMLHttpRequest,a=c(u.split(/[?&#]/)[0].split("/").pop().split(".")[1]||""),p=o.types[a]||o.type||V;if(n(p)&&(p=p.call(i,u)),s.responseType=p,s.open(e,u,!0),r(f))for(l in f)s.setRequestHeader(l,f[l]);return s.send("POST"===e?new FormData(t):null),s}function ft(t,n){let e=it(t,z,n);I("load",e,(()=>{200===(O=e.status)&&(a[at(st(n))]=[O,e.response,dt(e),Q===e.responseType])}))}function lt(t){if(!t)return;let n=function(t){return[t.offsetLeft,t.offsetTop]}(t);G(K,n),G(h,n)}function pt(n,e,r,u){let o,i,f,c=r(n),l={};for(o in e)if((i=b("#"+o.replace(/[:.]/g,"\\$&"),t))&&(l[o]=H(i)),!c[o]){delete e[o];let t=ut(o);t&&T(t)}for(o in c)e[o]||(e[o]=f=c[o],l[o]&&L(l[o])?D(l[o],M(f)):u&&C(u,M(f)));return e}function vt(t){return pt(t,v,tt,X)}function mt(t){return pt(t,F,et,K)}function yt(t){return pt(t,S,rt,X)}function bt(){I("keydown",p,xt),I("keyup",p,Ft),K=p.body,X=p.head,i.links=v=tt(),i.scripts=F=et(),i.styles=S=rt(),Lt([p,d]),o.cache&&ft(d,nt())}function gt(t){if(W(),Ht)return;let n,e=this,r=e.href,u=e.action,i=at(r||u),f=c(e.method||z);z===f&&(ot(e)&&(n=new URLSearchParams(new FormData(e))+"",i=i.split(/[?&#]/)[0]+(n?"?"+n:"")),o.turbo&&P(i)),x[i]=[J(e,f,i),e],$(t)}function kt(t){lt(ut(Z(nt()),1)),$(t)}function Et(){let t=this,n=t.href;a[at(st(n))]||ft(t,n),U("mousemove",t,Et)}ht.instances[t.id||t.name||function(t){return l(s(t))}(ht.instances)]=i,t.F3H=1;let Ht=!1;function xt(t){Ht=t.ctrlKey}function Ft(){Ht=!1}function wt(t){k=nt(),W(),Z(k)&&st(E)===st(k)||(x[k]=[J(d,z,k),d])}function Lt(n){let e=o.turbo;w.forEach((t=>{I(Y(t),t,gt),ot(t)?function(t){let n=R("input",{type:"hidden"}),e=g("[name][type=submit][value]",t);C(t,n),e.forEach((t=>{I("click",t,(function(){n.name=this.name,n.value=this.value}))}))}(t):e&&I("mousemove",t,Et)})),function(n){if(q.focus)return void A("focus",n);let e=b("[autofocus]",t);e&&e.focus()}(n),function(t){q.scroll?A("scroll",t):lt(ut(Z(nt()),1))}(n)}return i.abort=t=>(t?x[t]&&_(t):W(),i),i.caches=a,i.fetch=(t,n,e)=>it(e,n,t),i.links=v,i.lot=null,i.ref=null,i.scripts=F,i.state=o,i.styles=S,i.status=null,i.pop=()=>t.F3H?(delete t.F3H,w.forEach((t=>{I(Y(t),t,gt)})),U("DOMContentLoaded",d,bt),U("hashchange",d,kt),U("keydown",p,xt),U("keyup",p,Ft),U("popstate",d,wt),A("pop",[p,d]),i.abort()):i,I("DOMContentLoaded",d,bt),I("hashchange",d,kt),I("popstate",d,wt),i}return ht.instances={},ht.state={cache:!1,history:!0,is:(t,n)=>{let e=t.target,r=m(t,"href")||m(t,"action")||"",u=t.href||t.action||"";return(!e||"_self"===e)&&("#"!==r[0]&&!/^(data|javascript|mailto):/.test(r)&&((!Z(u)||st(n)!==st(u))&&(""===r||0===r.search(/[.\/?]/)||0===r.indexOf(W)||0===r.indexOf(B.protocol+W)||-1===r.indexOf("://"))))},lot:{"x-requested-with":_},ref:(t,n)=>n,sources:"a[href],form",turbo:!1,type:Q,types:{"":Q,CSS:V,JS:V,JSON:"json"}},ht.version="1.1.21",ht}));