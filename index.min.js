/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2020 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/f3h>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).F3H=t()}(this,(function(){"use strict";var n=function(n){return Array.isArray(n)},t=function(n){return"function"==typeof n},e=function(n,t){return n&&u(t)&&n instanceof t},r=function(n,t){return void 0===t&&(t=!0),"object"==typeof n&&(!t||e(n,Object))},u=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},o=function(n){return"string"==typeof n},i=function t(e){if(n(e))return e.map((function(n){return t(e)}));if(r(e)){for(var u in e)e[u]=t(e[u]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},f=function(n){return n.toLowerCase()},c=function(n){return n.toUpperCase()},s=function t(e){if(n(e))return e.map((function(n){return t(n)}));if(function(n){return/^-?(?:\d*.)?\d+$/.test(n+"")}(e))return function(n,t){return void 0===t&&(t=10),parseInt(n,t)}(e);if(r(e)){for(var u in e)e[u]=t(e[u]);return e}return{false:!1,null:null,true:!0}[e]||e},a=document,l=window,p=a.documentElement,d=function(n){var t=h(n),e=b(n),r=g(n);return!1!==e?[r,e,t]:[r,t]},v=function(n,t,e){if(void 0===e&&(e=!0),!w(n,t))return null;var r=n.getAttribute(t);return e?s(r):r},h=function(n,t){void 0===t&&(t=!0);for(var e,r=n.attributes,u={},o=0,i=r.length;o<i;++o)e=r[o].value,u[r[o].name]=t?s(e):e;return u},m=function(n,t){return(t||a).querySelector(n)},y=function(n,t){return(t||a).querySelectorAll(n)},b=function(n,t){void 0===t&&(t=!0);var e="innerHTML";if(!L(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},g=function(n){return f(n&&n.nodeName||"")||null},k=function(n){return n.nextElementSibling||null},E=function(n){return n.parentNode||null},H=function(n,t){void 0===t&&(t=!0);var e="textContent";if(!L(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},w=function(n,t){return n.hasAttribute(t)},x=function(n){return null!==E(n)},L=function(n,t){return t in n},T=function(n,t){return n.removeAttribute(t),n},F=function(n){var t=E(n);return n.remove(),t},O=function(n,t,e){return!0===e&&(e=t),n.setAttribute(t,i(e)),n},S=function(n,t){return n.append(t),t},A=function(n,t,e){return n=o(n)?a.createElement(n):n,r(t)&&(e=t,t=!1),o(t)&&C(n,t),r(e)&&function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?O(n,r,e):T(n,r)}(n,e),n},C=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="innerHTML";return L(n,r)&&(n[r]=e?t.trim():t),n},R=function(n,t){return E(n).insertBefore(t,n),t},q=function(n){return A.apply(void 0,n)},D=l.history,M=l.location,N=a.currentScript,B=function(n){return n&&n.preventDefault()},P=function(n,t,e){t.removeEventListener(n,e)},U=function(n,t,e,r){void 0===r&&(r=!1),t.addEventListener(n,e,r)};function $(n,t){var e=this;return u(I[n])?(I[n].forEach((function(n){return n.apply(e,t)})),e):e}var I={};function J(n,t){if(!u(n))return function(n){throw new TypeError('"'+n+'" is read-only')}("hooks"),I={},this;if(u(I[n]))if(u(t)){for(var e=0,r=I[n].length;e<r;++e)if(t===I[n][e]){I[n].splice(e,1);break}0===j&&delete I[n]}else delete I[n];return this}function G(n,t){return u(I[n])||(I[n]=[]),u(t)&&I[n].push(t),this}var K,X,_=function(n,t){return function(n){return e(n,RegExp)}(n)?n:(n=n.replace(/\//g,"\\/"),RegExp(n,u(t)?t:"g"))},z="F3H",Q="GET",V="document",W="text",Y="//"+M.hostname;function Z(n){return n.length}function nn(n){return cn(n)?"submit":"click"}function tn(n){return n.split("#")[1]||""}function en(n){for(var t,e,r,u={},o=y("link[rel=dns-prefetch],link[rel=preconnect],link[rel=prefetch],link[rel=preload],link[rel=prerender]",n),i=0,f=Z(o);i<f;++i)sn(e=o[i])||(e.id=t=e.id||"F3H:"+vn(v(e,"href")||H(e)),u[t]=r=d(e),u[t][Z(r)-1].href=e.href);return u}function rn(){return dn(M.href)}function un(n){for(var t,e,r,u={},o=y("script",n),i=0,f=Z(o);i<f;++i)an(e=o[i])||(e.id=t=e.id||"F3H:"+vn(v(e,"src")||H(e)),u[t]=r=d(e),u[t][Z(r)-1].src=e.src);return u}function on(n){for(var t,e,r,u={},o=y("link[rel=stylesheet],style",n),i=0,f=Z(o);i<f;++i)ln(e=o[i])||(e.id=t=e.id||"F3H:"+vn(v(e,"href")||H(e)),u[t]=r=d(e),"link"===r[0]&&(u[t][Z(r)-1].href=e.href));return u}function fn(n,t){return n?a.getElementById(n)||(t?a.getElementsByName(n)[0]:null):null}function cn(n){return"form"===g(n)}function sn(n){var t=f(z);return w(n,"data-"+t)||w(n,t)?1:0}function an(n){if(n.src&&N.src===n.src)return 1;var t=f(z);return w(n,"data-"+t)||w(n,t)||_("\\bF3H\\b").test(H(n)||"")?1:0}function ln(n){var t=f(z);return w(n,"data-"+t)||w(n,t)?1:0}function pn(n){return n.split("#")[0]}function dn(n){return n.replace(/\/+(?=[?&#]|$)/,"")}function vn(n){var t,e=0,r=Z(n);if(0===r)return e;for(t=0;t<r;++t)e=(e<<5)-e+n.charCodeAt(t),e&=e;return e<1?-1*e:e}function hn(n){var t,e,r,u,o={},i=n.getAllResponseHeaders().trim().split(/[\r\n]+/);for(t in i)e=i[t].split(": "),r=f(e.shift()),f(u=e.join(": ")),o[r]=s(u);return new Proxy(o,{get:function(n,t){return n[f(t)]||null},set:function(n,t,e){n[f(t)]=e}})}function mn(n,o){void 0===n&&(n=a),void 0===o&&(o={});var i,f=this;if(!e(f,mn))return new mn(n,o);if(u(n)&&(!1!==(i=n)&&!0!==i)&&!r(n)||(o=n,n=a),n.F3H)return f;f.state=o=Object.assign({},mn.state,!0===o?{cache:o}:o||{}),f.source=n;var s=$.bind(f),d=J.bind(f),v=G.bind(f);o.turbo&&(o.cache=!0);var h={},b=null,g=null,E=null,H=rn(),w=H,L={},T=null,O=M(o.sources),j=null,C=null;function M(n,e){H=rn();var r=y(n,e);if(t(o.is)){var u=[];return r.forEach((function(n){o.is.call(f,n,H)&&u.push(n)})),u}return r}function N(n){n!==rn()&&o.history&&D.pushState({},"",n)}function _(n,t,e){var r,u=function(n){return n===l}(n),i=o.history;if(Q!==t||n!==E||u){if(E=n,f.ref=dn(w=e),s("exit",[a,n]),o.cache){var c=h[dn(pn(e))];if(c)return f.lot=g=c[2],f.status=j=c[0],c[3]&&!u&&i&&ln(p),N(e),r=[c[1],n],c[3]&&(b=yn(r[0])),c[3]&&(C=gn(r[0])),s("success",r),s(c[0],r),O=M(o.sources),c[3]&&(T=bn(r[0])),On(r),void s("enter",r)}var d,v,m=sn(n,t,e,o.lot),y=m.upload,k=V===m.responseType;return U("abort",m,(function(){H(),s("abort",[m.response,n])})),U("error",m,d=function(){H(),k&&!u&&i&&ln(p),r=[m.response,n],k&&(b=yn(r[0])),k&&(C=gn(r[0])),s("error",r),O=M(o.sources),k&&(T=bn(r[0])),On(r),s("enter",r)}),U("error",y,d),U("load",m,d=function(){if(H(),r=[m.response,n],v=m.responseURL,j>=300&&j<400){var t=dn(v);return h[t]&&delete h[t],s("success",r),s(j,r),void _(E=l,Q,v||e)}N(-1===e.indexOf("#")&&v||e),k&&(C=gn(r[0])),s("success",r),s(j,r),k&&i&&ln(p),O=M(o.sources),k&&(T=bn(r[0])),On(r),s("enter",r)}),U("load",y,d),U("progress",m,(function(n){H(),s("pull",n.lengthComputable?[n.loaded,n.total]:[0,-1])})),U("progress",y,(function(n){H(),s("push",n.lengthComputable?[n.loaded,n.total]:[0,-1])})),m}function H(){g=hn(m),j=m.status,Q===t&&o.cache&&j&&(h[dn(pn(e))]=[j,m.response,g,k]),f.lot=g,f.status=j}}function z(n){L[n]&&L[n][0]&&(L[n][0].abort(),delete L[n])}function Y(){for(var n in L)z(n)}function sn(n,e,u,i){u=t(o.ref)?o.ref.call(f,n,u):u;var s,a=new XMLHttpRequest,l=c(u.split(/[?&#]/)[0].split("/").pop().split(".")[1]||""),p=o.types[l]||o.type||W;if(t(p)&&(p=p.call(f,u)),a.responseType=p,a.open(e,u,!0),r(i))for(s in i)a.setRequestHeader(s,i[s]);return a.send("POST"===e?new FormData(n):null),a}function an(n,t){var e=sn(n,Q,t);U("load",e,(function(){200===(j=e.status)&&(h[dn(pn(t))]=[j,e.response,hn(e),V===e.responseType])}))}function ln(n){n&&(p.scrollLeft=K.scrollLeft=n.offsetLeft,p.scrollTop=K.scrollTop=n.offsetTop)}function vn(t,e,r,u){var o,i,f,c=r(t),s={};for(o in e)(i=m("#"+o.replace(/[:.]/g,"\\$&"),n))&&(s[o]=k(i)),c[o]||(delete e[o],F(fn(o)));for(o in c)e[o]||(e[o]=f=c[o],s[o]&&x(s[o])?R(s[o],q(f)):u&&S(u,q(f)));return e}function yn(n){return vn(n,b,en,X)}function bn(n){return vn(n,T,un,K)}function gn(n){return vn(n,C,on,X)}function kn(){U("keydown",a,Ln),U("keyup",a,Tn),K=a.body,X=a.head,f.links=b=en(),f.scripts=T=un(),f.styles=C=on(),On([a,l]),o.cache&&an(l,rn())}function En(n){if(Y(),!xn){var t,e=this,r=e.href,u=e.action,i=r||u,f=c(e.method||Q);Q===f&&(cn(e)&&(t=new URLSearchParams(new FormData(e))+"",i=dn(i.split(/[?&#]/)[0])+(t?"?"+t:"")),o.turbo&&N(i)),L[i]=[_(e,f,i),e],B(n)}}function Hn(n){ln(fn(tn(rn()),1)),B(n)}function wn(){var n=this,t=n.href;h[dn(pn(t))]||an(n,t),P("mousemove",n,wn)}mn.instances[n.id||n.name||Z(Object.keys(mn.instances))]=f,n.F3H=1;var xn=!1;function Ln(n){xn=n.ctrlKey}function Tn(){xn=!1}function Fn(n){H=rn(),Y(),tn(H)&&pn(w)===pn(H)||(L[H]=[_(l,Q,H),l])}function On(t){var e=o.turbo;O.forEach((function(n){var t,r,u;U(nn(n),n,En),cn(n)?(t=n,r=A("input",{type:"hidden"}),u=y("[name][type=submit][value]",t),S(t,r),u.forEach((function(n){U("click",n,(function(){r.name=this.name,r.value=this.value}))}))):e&&function(n){U("mousemove",n,wn)}(n)})),function(t){if(I.focus)s("focus",t);else{var e=m("[autofocus]",n);e&&e.focus()}}(t),function(n){I.scroll?s("scroll",n):ln(fn(tn(rn()),1))}(t)}return f.abort=function(n){return n?L[n]&&z(n):Y(),f},f.caches=h,f.fetch=function(n,t,e){return sn(e,t,n)},f.fire=s,f.hooks=I,f.links=b,f.lot=null,f.off=d,f.on=v,f.ref=null,f.scripts=T,f.state=o,f.styles=C,f.status=null,f.pop=function(){return n.F3H?(delete n.F3H,O.forEach((function(n){U(nn(n),n,En)})),P("DOMContentLoaded",l,kn),P("hashchange",l,Hn),P("keydown",a,Ln),P("keyup",a,Tn),P("popstate",l,Fn),s("pop",[a,l]),f.abort()):f},U("DOMContentLoaded",l,kn),U("hashchange",l,Hn),U("popstate",l,Fn),f}return mn.instances={},mn.state={cache:!1,history:!0,is:function(n,t){var e=n.target,r=v(n,"href")||v(n,"action")||"",u=n.href||n.action||"";return(!e||"_self"===e)&&("#"!==r[0]&&!/^(data|javascript|mailto):/.test(r)&&((!tn(u)||pn(t)!==pn(u))&&(""===r||0===r.search(/[.\/?]/)||0===r.indexOf(Y)||0===r.indexOf(M.protocol+Y)||-1===r.indexOf("://"))))},lot:{"x-requested-with":z},ref:function(n,t){return t},sources:"a[href],form",turbo:!1,type:V,types:{"":V,CSS:W,JS:W,JSON:"json"}},mn.version="1.1.7",mn}));