/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2020 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/f3h>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).F3H=t()}(this,(function(){"use strict";var n=function(n){return Array.isArray(n)},t=function(n){return"function"==typeof n},r=function(n,t){return n&&o(t)&&n instanceof t},e=function(n){return/^-?(?:\d*.)?\d+$/.test(n+"")},u=function(n,t){return void 0===t&&(t=!0),"object"==typeof n&&(!t||r(n,Object))},o=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},i=function(n){return"string"==typeof n},f=function t(r){if(n(r))return r.map((function(n){return t(r)}));if(u(r)){for(var e in r)r[e]=t(r[e]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},c=function t(r){if(n(r))return r.map((function(n){return t(n)}));if(e(r))return function(n,t){return void 0===t&&(t=10),parseInt(n,t)}(r);if(u(r)){for(var o in r)r[o]=t(r[o]);return r}return{false:!1,null:null,true:!0}[r]||r},s=document,a=window,l=s.documentElement,p=function(n){var t=v(n),r=y(n),e=b(n);return!1!==r?[e,r,t]:[e,t]},d=function(n,t,r){if(void 0===r&&(r=!0),!H(n,t))return null;var e=n.getAttribute(t);return r?c(e):e},v=function(n,t){void 0===t&&(t=!0);for(var r,e=n.attributes,u={},o=0,i=e.length;o<i;++o)r=e[o].value,u[e[o].name]=t?c(r):r;return u},h=function(n,t){return(t||s).querySelector(n)},m=function(n,t){return(t||s).querySelectorAll(n)},y=function(n,t){void 0===t&&(t=!0);var r="innerHTML";if(!w(n,r))return!1;var e=n[r];return""!==(e=t?e.trim():e)?e:null},b=function(n){return(n&&n.nodeName||"").toLowerCase()||null},g=function(n){return n.nextElementSibling||null},k=function(n){return n.parentNode||null},E=function(n,t){void 0===t&&(t=!0);var r="textContent";if(!w(n,r))return!1;var e=n[r];return""!==(e=t?e.trim():e)?e:null},H=function(n,t){return n.hasAttribute(t)},x=function(n){return null!==k(n)},w=function(n,t){return t in n},F=function(n,t){return n.removeAttribute(t),n},L=function(n){var t=k(n);return n.remove(),t},O=function(n,t,r){return!0===r&&(r=t),n.setAttribute(t,f(r)),n},S=function(n,t){return n.append(t),t},T=function(n,t,r){return n=i(n)?s.createElement(n):n,u(t)&&(r=t,t=!1),i(t)&&A(n,t),u(r)&&function(n,t){var r;for(var e in t)(r=t[e])||""===r||0===r?O(n,e,r):F(n,e)}(n,r),n},A=function(n,t,r){if(void 0===r&&(r=!0),null===t)return n;var e="innerHTML";return w(n,e)&&(n[e]=r?t.trim():t),n},C=function(n,t){return k(n).insertBefore(t,n),t},R=function(n){return T.apply(void 0,n)},q=a.history,D=a.location,M=s.currentScript,N=function(n){return n&&n.preventDefault()},B=function(n,t,r){t.removeEventListener(n,r)},I=function(n,t,r,e){void 0===e&&(e=!1),t.addEventListener(n,r,e)};function P(n){var t={};return n.hooks=t,n.fire=function(r,e){return o(t[r])?(t[r].forEach((function(t){return t.apply(n,e)})),n):n},n.off=function(r,e){if(!o(r))return t={},n;if(o(t[r]))if(o(e)){for(var u=0,i=t[r].length;u<i;++u)if(e===t[r][u]){t[r].splice(u,1);break}0===j&&delete t[r]}else delete t[r];return n},n.on=function(r,e){return o(t[r])||(t[r]=[]),o(e)&&t[r].push(e),n},n}var U,$,J=P({}),G=(J.fire,J.off,J.on,J.hooks,function(n,t){return function(n){return r(n,RegExp)}(n)?n:(n=n.replace(/\//g,"\\/"),RegExp(n,o(t)?t:"g"))}),K=function(n,t){return n.scrollLeft=t[0],n.scrollTop=t[1],n},X=function(n){return n.toLowerCase()},_=function(n){return n.toUpperCase()},z=function(n){return n.length},Q=function(n){return Object.keys(n)},V=function t(r){if(n(r))return r.map((function(n){return t(n)}));if(e(r))return function(n,t){return void 0===t&&(t=10),t?parseInt(n,t):parseFloat(n)}(r);if(u(r)){for(var o in r)r[o]=t(r[o]);return r}return{false:!1,null:null,true:!0}[r]||r},W="F3H",Y="GET",Z="document",nn="text",tn="//"+D.hostname;function rn(n){return an(n)?"submit":"click"}function en(n){return n.split("#")[1]||""}function un(n){for(var t,r,e,u={},o=m("link[rel=dns-prefetch],link[rel=preconnect],link[rel=prefetch],link[rel=preload],link[rel=prerender]",n),i=0,f=z(o);i<f;++i)ln(r=o[i])||(r.id=t=r.id||"F3H:"+mn(d(r,"href")||E(r)),u[t]=e=p(r),u[t][z(e)-1].href=r.href);return u}function on(){return hn(D.href)}function fn(n){for(var t,r,e,u={},o=m("script",n),i=0,f=z(o);i<f;++i)pn(r=o[i])||(r.id=t=r.id||"F3H:"+mn(d(r,"src")||E(r)),u[t]=e=p(r),u[t][z(e)-1].src=r.src);return u}function cn(n){for(var t,r,e,u={},o=m("link[rel=stylesheet],style",n),i=0,f=z(o);i<f;++i)dn(r=o[i])||(r.id=t=r.id||"F3H:"+mn(d(r,"href")||E(r)),u[t]=e=p(r),"link"===e[0]&&(u[t][z(e)-1].href=r.href));return u}function sn(n,t){return n?s.getElementById(n)||(t?s.getElementsByName(n)[0]:null):null}function an(n){return"form"===b(n)}function ln(n){var t=X(W);return H(n,"data-"+t)||H(n,t)?1:0}function pn(n){if(n.src&&M.src===n.src)return 1;var t=X(W);return H(n,"data-"+t)||H(n,t)||G("\\bF3H\\b").test(E(n)||"")?1:0}function dn(n){var t=X(W);return H(n,"data-"+t)||H(n,t)?1:0}function vn(n){return n.split("#")[0]}function hn(n){return n.replace(/\/+(?=[?&#]|$)/,"")}function mn(n){var t,r=z(n),e=0;if(0===r)return e;for(t=0;t<r;++t)e=(e<<5)-e+n.charCodeAt(t),e&=e;return e<1?-1*e:e}function yn(n){var t,r,e={},u=n.getAllResponseHeaders().trim().split(/[\r\n]+/);for(t in u)r=u[t].split(": "),e[X(r.shift())]=V(r.join(": "));return new Proxy(e,{get:function(n,t){return n[X(t)]||null},set:function(n,t,r){n[X(t)]=r}})}function bn(n,e){void 0===n&&(n=s),void 0===e&&(e={});var i,f=this;if(!r(f,bn))return new bn(n,e);if(o(n)&&(!1!==(i=n)&&!0!==i)&&!u(n)||(e=n,n=s),!n.F3H){f.state=e=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return Object.assign.apply(Object,[{}].concat(t))}(bn.state,!0===e?{cache:e}:e||{}),f.source=n,e.turbo&&(e.cache=!0);var c={},p=null,d=null,v=null,y=on(),b=y,k={},E=null,H=M(e.sources),w=null,F=null,O=P(f),j=O.fire,A=O.hooks;bn.instances[n.id||n.name||function(n){return z(Q(n))}(bn.instances)]=f,n.F3H=1;var D=!1;return f.abort=function(n){return n?k[n]&&X(n):V(),f},f.caches=c,f.fetch=function(n,t,r){return W(r,t,n)},f.links=p,f.lot=null,f.ref=null,f.scripts=E,f.state=e,f.styles=F,f.status=null,f.pop=function(){return n.F3H?(delete n.F3H,H.forEach((function(n){I(rn(n),n,En)})),B("DOMContentLoaded",a,kn),B("hashchange",a,Hn),B("keydown",s,wn),B("keyup",s,Fn),B("popstate",a,Ln),j("pop",[s,a]),f.abort()):f},I("DOMContentLoaded",a,kn),I("hashchange",a,Hn),I("popstate",a,Ln),f}function M(n,r){y=on();var u=m(n,r);if(t(e.is)){var o=[];return u.forEach((function(n){e.is.call(f,n,y)&&o.push(n)})),o}return u}function J(n){n!==on()&&e.history&&q.pushState({},"",n)}function G(n,t,r){var u,o=function(n){return n===a}(n),i=e.history;if(Y!==t||n!==v||o){if(v=n,f.ref=hn(b=r),j("exit",[s,n]),e.cache){var h=c[hn(vn(r))];if(h)return f.lot=d=h[2],f.status=w=h[0],h[3]&&!o&&i&&ln(l),J(r),u=[h[1],n],h[3]&&(p=dn(u[0])),h[3]&&(F=gn(u[0])),j("success",u),j(h[0],u),H=M(e.sources),h[3]&&(E=mn(u[0])),On(u),void j("enter",u)}var m,y,g=W(n,t,r,e.lot),k=g.upload,x=Z===g.responseType;return I("abort",g,(function(){L(),j("abort",[g.response,n])})),I("error",g,m=function(){L(),x&&!o&&i&&ln(l),u=[g.response,n],x&&(p=dn(u[0])),x&&(F=gn(u[0])),j("error",u),H=M(e.sources),x&&(E=mn(u[0])),On(u),j("enter",u)}),I("error",k,m),I("load",g,m=function(){if(L(),u=[g.response,n],y=g.responseURL,w>=300&&w<400){var t=hn(y);return c[t]&&delete c[t],j("success",u),j(w,u),void G(v=a,Y,y||r)}J(-1===r.indexOf("#")&&y||r),x&&(F=gn(u[0])),j("success",u),j(w,u),x&&i&&ln(l),H=M(e.sources),x&&(E=mn(u[0])),On(u),j("enter",u)}),I("load",k,m),I("progress",g,(function(n){L(),j("pull",n.lengthComputable?[n.loaded,n.total]:[0,-1])})),I("progress",k,(function(n){L(),j("push",n.lengthComputable?[n.loaded,n.total]:[0,-1])})),g}function L(){d=yn(g),w=g.status,Y===t&&e.cache&&w&&(c[hn(vn(r))]=[w,g.response,d,x]),f.lot=d,f.status=w}}function X(n){k[n]&&k[n][0]&&(k[n][0].abort(),delete k[n])}function V(){for(var n in k)X(n)}function W(n,r,o,i){o=t(e.ref)?e.ref.call(f,n,o):o;var c,s=new XMLHttpRequest,a=_(o.split(/[?&#]/)[0].split("/").pop().split(".")[1]||""),l=e.types[a]||e.type||nn;if(t(l)&&(l=l.call(f,o)),s.responseType=l,s.open(r,o,!0),u(i))for(c in i)s.setRequestHeader(c,i[c]);return s.send("POST"===r?new FormData(n):null),s}function tn(n,t){var r=W(n,Y,t);I("load",r,(function(){200===(w=r.status)&&(c[hn(vn(t))]=[w,r.response,yn(r),Z===r.responseType])}))}function ln(n){if(n){var t=function(n){return[n.offsetLeft,n.offsetTop]}(n);K(U,t),K(l,t)}}function pn(t,r,e,u){var o,i,f,c=e(t),s={};for(o in r)(i=h("#"+o.replace(/[:.]/g,"\\$&"),n))&&(s[o]=g(i)),c[o]||(delete r[o],L(sn(o)));for(o in c)r[o]||(r[o]=f=c[o],s[o]&&x(s[o])?C(s[o],R(f)):u&&S(u,R(f)));return r}function dn(n){return pn(n,p,un,$)}function mn(n){return pn(n,E,fn,U)}function gn(n){return pn(n,F,cn,$)}function kn(){I("keydown",s,wn),I("keyup",s,Fn),U=s.body,$=s.head,f.links=p=un(),f.scripts=E=fn(),f.styles=F=cn(),On([s,a]),e.cache&&tn(a,on())}function En(n){if(V(),!D){var t,r=this,u=r.href,o=r.action,i=hn(u||o),f=_(r.method||Y);Y===f&&(an(r)&&(t=new URLSearchParams(new FormData(r))+"",i=i.split(/[?&#]/)[0]+(t?"?"+t:"")),e.turbo&&J(i)),k[i]=[G(r,f,i),r],N(n)}}function Hn(n){ln(sn(en(on()),1)),N(n)}function xn(){var n=this,t=n.href;c[hn(vn(t))]||tn(n,t),B("mousemove",n,xn)}function wn(n){D=n.ctrlKey}function Fn(){D=!1}function Ln(n){y=on(),V(),en(y)&&vn(b)===vn(y)||(k[y]=[G(a,Y,y),a])}function On(t){var r=e.turbo;H.forEach((function(n){var t,e,u;I(rn(n),n,En),an(n)?(t=n,e=T("input",{type:"hidden"}),u=m("[name][type=submit][value]",t),S(t,e),u.forEach((function(n){I("click",n,(function(){e.name=this.name,e.value=this.value}))}))):r&&function(n){I("mousemove",n,xn)}(n)})),function(t){if(A.focus)j("focus",t);else{var r=h("[autofocus]",n);r&&r.focus()}}(t),function(n){A.scroll?j("scroll",n):ln(sn(en(on()),1))}(t)}}return bn.instances={},bn.state={cache:!1,history:!0,is:function(n,t){var r=n.target,e=d(n,"href")||d(n,"action")||"",u=n.href||n.action||"";return(!r||"_self"===r)&&("#"!==e[0]&&!/^(data|javascript|mailto):/.test(e)&&((!en(u)||vn(t)!==vn(u))&&(""===e||0===e.search(/[.\/?]/)||0===e.indexOf(tn)||0===e.indexOf(D.protocol+tn)||-1===e.indexOf("://"))))},lot:{"x-requested-with":W},ref:function(n,t){return t},sources:"a[href],form",turbo:!1,type:Z,types:{"":Z,CSS:nn,JS:nn,JSON:"json"}},bn.version="1.1.13",bn}));