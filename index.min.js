/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2020 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/f3h>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).F3H=t()}(this,(function(){"use strict";var n=function(n){return Array.isArray(n)},t=function(n){return"function"==typeof n},e=function(n,t){return n&&o(t)&&n instanceof t},r=function(n){return/^-?(?:\d*.)?\d+$/.test(n+"")},u=function(n,t){return void 0===t&&(t=!0),"object"==typeof n&&(!t||e(n,Object))},o=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},i=function(n){return"string"==typeof n},f=function t(e){if(n(e))return e.map((function(n){return t(e)}));if(u(e)){for(var r in e)e[r]=t(e[r]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},c=function t(e){if(n(e))return e.map((function(n){return t(n)}));if(r(e))return function(n,t){return void 0===t&&(t=10),parseInt(n,t)}(e);if(u(e)){for(var o in e)e[o]=t(e[o]);return e}return{false:!1,null:null,true:!0}[e]||e},s=document,a=window,l=s.documentElement,p=function(n){var t=v(n),e=y(n),r=b(n);return!1!==e?[r,e,t]:[r,t]},d=function(n,t,e){if(void 0===e&&(e=!0),!H(n,t))return null;var r=n.getAttribute(t);return e?c(r):r},v=function(n,t){void 0===t&&(t=!0);for(var e,r=n.attributes,u={},o=0,i=r.length;o<i;++o)e=r[o].value,u[r[o].name]=t?c(e):e;return u},h=function(n,t){return(t||s).querySelector(n)},m=function(n,t){return(t||s).querySelectorAll(n)},y=function(n,t){void 0===t&&(t=!0);var e="innerHTML";if(!L(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},b=function(n){return(n&&n.nodeName||"").toLowerCase()||null},g=function(n){return n.nextElementSibling||null},k=function(n){return n.parentNode||null},E=function(n,t){void 0===t&&(t=!0);var e="textContent";if(!L(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},H=function(n,t){return n.hasAttribute(t)},x=function(n){return null!==k(n)},L=function(n,t){return t in n},w=function(n,t){return n.removeAttribute(t),n},F=function(n){var t=k(n);return n.remove(),t},T=function(n,t,e){return!0===e&&(e=t),n.setAttribute(t,f(e)),n},O=function(n,t){return n.append(t),t},S=function(n,t,e){return n=i(n)?s.createElement(n):n,u(t)&&(e=t,t=!1),i(t)&&C(n,t),u(e)&&function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?T(n,r,e):w(n,r)}(n,e),n},C=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="innerHTML";return L(n,r)&&(n[r]=e?t.trim():t),n},A=function(n,t){return k(n).insertBefore(t,n),t},R=function(n){return S.apply(void 0,n)},q=a.history,D=a.location,M=s.currentScript,N=function(n){return n&&n.preventDefault()},B=function(n,t,e){t.removeEventListener(n,e)},I=function(n,t,e,r){void 0===r&&(r=!1),t.addEventListener(n,e,r)};function P(n,t){var e=this;return o(U[n])?(U[n].forEach((function(n){return n.apply(e,t)})),e):e}var U={};function $(n,t){if(!o(n))return U={},this;if(o(U[n]))if(o(t)){for(var e=0,r=U[n].length;e<r;++e)if(t===U[n][e]){U[n].splice(e,1);break}0===j&&delete U[n]}else delete U[n];return this}function J(n,t){return o(U[n])||(U[n]=[]),o(t)&&U[n].push(t),this}var G,K,X=function(n,t){return function(n){return e(n,RegExp)}(n)?n:(n=n.replace(/\//g,"\\/"),RegExp(n,o(t)?t:"g"))},_=function(n){return n.toLowerCase()},z=function(n){return n.toUpperCase()},Q=function t(e){if(n(e))return e.map((function(n){return t(n)}));if(r(e))return function(n,t){return void 0===t&&(t=10),t?parseInt(n,t):parseFloat(n)}(e);if(u(e)){for(var o in e)e[o]=t(e[o]);return e}return{false:!1,null:null,true:!0}[e]||e},V="F3H",W="GET",Y="document",Z="text",nn="//"+D.hostname;function tn(n){return n.length}function en(n){return an(n)?"submit":"click"}function rn(n){return n.split("#")[1]||""}function un(n){for(var t,e,r,u={},o=m("link[rel=dns-prefetch],link[rel=preconnect],link[rel=prefetch],link[rel=preload],link[rel=prerender]",n),i=0,f=tn(o);i<f;++i)ln(e=o[i])||(e.id=t=e.id||"F3H:"+mn(d(e,"href")||E(e)),u[t]=r=p(e),u[t][tn(r)-1].href=e.href);return u}function on(){return hn(D.href)}function fn(n){for(var t,e,r,u={},o=m("script",n),i=0,f=tn(o);i<f;++i)pn(e=o[i])||(e.id=t=e.id||"F3H:"+mn(d(e,"src")||E(e)),u[t]=r=p(e),u[t][tn(r)-1].src=e.src);return u}function cn(n){for(var t,e,r,u={},o=m("link[rel=stylesheet],style",n),i=0,f=tn(o);i<f;++i)dn(e=o[i])||(e.id=t=e.id||"F3H:"+mn(d(e,"href")||E(e)),u[t]=r=p(e),"link"===r[0]&&(u[t][tn(r)-1].href=e.href));return u}function sn(n,t){return n?s.getElementById(n)||(t?s.getElementsByName(n)[0]:null):null}function an(n){return"form"===b(n)}function ln(n){var t=_(V);return H(n,"data-"+t)||H(n,t)?1:0}function pn(n){if(n.src&&M.src===n.src)return 1;var t=_(V);return H(n,"data-"+t)||H(n,t)||X("\\bF3H\\b").test(E(n)||"")?1:0}function dn(n){var t=_(V);return H(n,"data-"+t)||H(n,t)?1:0}function vn(n){return n.split("#")[0]}function hn(n){return n.replace(/\/+(?=[?&#]|$)/,"")}function mn(n){var t,e=0,r=tn(n);if(0===r)return e;for(t=0;t<r;++t)e=(e<<5)-e+n.charCodeAt(t),e&=e;return e<1?-1*e:e}function yn(n){var t,e,r,u,o={},i=n.getAllResponseHeaders().trim().split(/[\r\n]+/);for(t in i)e=i[t].split(": "),r=_(e.shift()),_(u=e.join(": ")),o[r]=Q(u);return new Proxy(o,{get:function(n,t){return n[_(t)]||null},set:function(n,t,e){n[_(t)]=e}})}function bn(n,r){void 0===n&&(n=s),void 0===r&&(r={});var i,f=this;if(!e(f,bn))return new bn(n,r);if(o(n)&&(!1!==(i=n)&&!0!==i)&&!u(n)||(r=n,n=s),n.F3H)return f;f.state=r=Object.assign({},bn.state,!0===r?{cache:r}:r||{}),f.source=n;var c=P.bind(f),p=$.bind(f),d=J.bind(f);r.turbo&&(r.cache=!0);var v={},y=null,b=null,k=null,E=on(),H=E,L={},w=null,T=D(r.sources),C=null,j=null;function D(n,e){E=on();var u=m(n,e);if(t(r.is)){var o=[];return u.forEach((function(n){r.is.call(f,n,E)&&o.push(n)})),o}return u}function M(n){n!==on()&&r.history&&q.pushState({},"",n)}function X(n,t,e){var u,o=function(n){return n===a}(n),i=r.history;if(W!==t||n!==k||o){if(k=n,f.ref=hn(H=e),c("exit",[s,n]),r.cache){var p=v[hn(vn(e))];if(p)return f.lot=b=p[2],f.status=C=p[0],p[3]&&!o&&i&&ln(l),M(e),u=[p[1],n],p[3]&&(y=dn(u[0])),p[3]&&(j=gn(u[0])),c("success",u),c(p[0],u),T=D(r.sources),p[3]&&(w=mn(u[0])),On(u),void c("enter",u)}var d,h,m=V(n,t,e,r.lot),g=m.upload,E=Y===m.responseType;return I("abort",m,(function(){x(),c("abort",[m.response,n])})),I("error",m,d=function(){x(),E&&!o&&i&&ln(l),u=[m.response,n],E&&(y=dn(u[0])),E&&(j=gn(u[0])),c("error",u),T=D(r.sources),E&&(w=mn(u[0])),On(u),c("enter",u)}),I("error",g,d),I("load",m,d=function(){if(x(),u=[m.response,n],h=m.responseURL,C>=300&&C<400){var t=hn(h);return v[t]&&delete v[t],c("success",u),c(C,u),void X(k=a,W,h||e)}M(-1===e.indexOf("#")&&h||e),E&&(j=gn(u[0])),c("success",u),c(C,u),E&&i&&ln(l),T=D(r.sources),E&&(w=mn(u[0])),On(u),c("enter",u)}),I("load",g,d),I("progress",m,(function(n){x(),c("pull",n.lengthComputable?[n.loaded,n.total]:[0,-1])})),I("progress",g,(function(n){x(),c("push",n.lengthComputable?[n.loaded,n.total]:[0,-1])})),m}function x(){b=yn(m),C=m.status,W===t&&r.cache&&C&&(v[hn(vn(e))]=[C,m.response,b,E]),f.lot=b,f.status=C}}function _(n){L[n]&&L[n][0]&&(L[n][0].abort(),delete L[n])}function Q(){for(var n in L)_(n)}function V(n,e,o,i){o=t(r.ref)?r.ref.call(f,n,o):o;var c,s=new XMLHttpRequest,a=z(o.split(/[?&#]/)[0].split("/").pop().split(".")[1]||""),l=r.types[a]||r.type||Z;if(t(l)&&(l=l.call(f,o)),s.responseType=l,s.open(e,o,!0),u(i))for(c in i)s.setRequestHeader(c,i[c]);return s.send("POST"===e?new FormData(n):null),s}function nn(n,t){var e=V(n,W,t);I("load",e,(function(){200===(C=e.status)&&(v[hn(vn(t))]=[C,e.response,yn(e),Y===e.responseType])}))}function ln(n){n&&(l.scrollLeft=G.scrollLeft=n.offsetLeft,l.scrollTop=G.scrollTop=n.offsetTop)}function pn(t,e,r,u){var o,i,f,c=r(t),s={};for(o in e)(i=h("#"+o.replace(/[:.]/g,"\\$&"),n))&&(s[o]=g(i)),c[o]||(delete e[o],F(sn(o)));for(o in c)e[o]||(e[o]=f=c[o],s[o]&&x(s[o])?A(s[o],R(f)):u&&O(u,R(f)));return e}function dn(n){return pn(n,y,un,K)}function mn(n){return pn(n,w,fn,G)}function gn(n){return pn(n,j,cn,K)}function kn(){I("keydown",s,wn),I("keyup",s,Fn),G=s.body,K=s.head,f.links=y=un(),f.scripts=w=fn(),f.styles=j=cn(),On([s,a]),r.cache&&nn(a,on())}function En(n){if(Q(),!Ln){var t,e=this,u=e.href,o=e.action,i=u||o,f=z(e.method||W);W===f&&(an(e)&&(t=new URLSearchParams(new FormData(e))+"",i=hn(i.split(/[?&#]/)[0])+(t?"?"+t:"")),r.turbo&&M(i)),L[i]=[X(e,f,i),e],N(n)}}function Hn(n){ln(sn(rn(on()),1)),N(n)}function xn(){var n=this,t=n.href;v[hn(vn(t))]||nn(n,t),B("mousemove",n,xn)}bn.instances[n.id||n.name||tn(Object.keys(bn.instances))]=f,n.F3H=1;var Ln=!1;function wn(n){Ln=n.ctrlKey}function Fn(){Ln=!1}function Tn(n){E=on(),Q(),rn(E)&&vn(H)===vn(E)||(L[E]=[X(a,W,E),a])}function On(t){var e=r.turbo;T.forEach((function(n){var t,r,u;I(en(n),n,En),an(n)?(t=n,r=S("input",{type:"hidden"}),u=m("[name][type=submit][value]",t),O(t,r),u.forEach((function(n){I("click",n,(function(){r.name=this.name,r.value=this.value}))}))):e&&function(n){I("mousemove",n,xn)}(n)})),function(t){if(U.focus)c("focus",t);else{var e=h("[autofocus]",n);e&&e.focus()}}(t),function(n){U.scroll?c("scroll",n):ln(sn(rn(on()),1))}(t)}return f.abort=function(n){return n?L[n]&&_(n):Q(),f},f.caches=v,f.fetch=function(n,t,e){return V(e,t,n)},f.fire=c,f.hooks=U,f.links=y,f.lot=null,f.off=p,f.on=d,f.ref=null,f.scripts=w,f.state=r,f.styles=j,f.status=null,f.pop=function(){return n.F3H?(delete n.F3H,T.forEach((function(n){I(en(n),n,En)})),B("DOMContentLoaded",a,kn),B("hashchange",a,Hn),B("keydown",s,wn),B("keyup",s,Fn),B("popstate",a,Tn),c("pop",[s,a]),f.abort()):f},I("DOMContentLoaded",a,kn),I("hashchange",a,Hn),I("popstate",a,Tn),f}return bn.instances={},bn.state={cache:!1,history:!0,is:function(n,t){var e=n.target,r=d(n,"href")||d(n,"action")||"",u=n.href||n.action||"";return(!e||"_self"===e)&&("#"!==r[0]&&!/^(data|javascript|mailto):/.test(r)&&((!rn(u)||vn(t)!==vn(u))&&(""===r||0===r.search(/[.\/?]/)||0===r.indexOf(nn)||0===r.indexOf(D.protocol+nn)||-1===r.indexOf("://"))))},lot:{"x-requested-with":V},ref:function(n,t){return t},sources:"a[href],form",turbo:!1,type:Y,types:{"":Y,CSS:Z,JS:Z,JSON:"json"}},bn.version="1.1.9",bn}));