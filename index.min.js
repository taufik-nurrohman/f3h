/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2020 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/f3h>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).F3H=t()}(this,(function(){"use strict";const e=e=>Array.isArray(e),t=e=>"function"==typeof e,r=(e,t)=>e&&s(t)&&e instanceof t,n=(e,t=!0)=>"object"==typeof e&&(!t||r(e,Object)),s=e=>(e=>void 0!==e)(e)&&!(e=>null===e)(e),o=e=>"string"==typeof e,i=t=>{if(e(t))return t.map((e=>i(t)));if(n(t)){for(let e in t)t[e]=i(t[e]);return t}return!1===t?"false":null===t?"null":!0===t?"true":""+t},u=e=>e.toLowerCase(),c=e=>e.toUpperCase(),f=t=>{if(e(t))return t.map((e=>f(e)));if((e=>/^-?(?:\d*.)?\d+$/.test(e+""))(t))return((e,t=10)=>parseInt(e,t))(t);if(n(t)){for(let e in t)t[e]=f(t[e]);return t}return{false:!1,null:null,true:!0}[t]||t},l=document,a=window,p=l.documentElement,h=e=>{let t=v(e),r=b(e),n=g(e);return!1!==r?[n,r,t]:[n,t]},d=(e,t,r=!0)=>{if(!x(e,t))return null;let n=e.getAttribute(t);return r?f(n):n},v=(e,t=!0)=>{let r,n=e.attributes,s={};for(let e=0,o=n.length;e<o;++e)r=n[e].value,s[n[e].name]=t?f(r):r;return s},m=(e,t)=>(t||l).querySelector(e),y=(e,t)=>(t||l).querySelectorAll(e),b=(e,t=!0)=>{let r="innerHTML";if(!w(e,r))return!1;let n=e[r];return n=t?n.trim():n,""!==n?n:null},g=e=>((e||{}).nodeName||"").toLowerCase()||null,k=e=>e.nextElementSibling||null,E=e=>e.parentNode||null,q=(e,t=!0)=>{let r="textContent";if(!w(e,r))return!1;let n=e[r];return n=t?n.trim():n,""!==n?n:null},x=(e,t)=>e.hasAttribute(t),L=e=>null!==E(e),w=(e,t)=>t in e,T=(e,t)=>(e.removeAttribute(t),e),H=e=>{let t=E(e);return e.remove(),t},O=(e,t,r)=>(e.setAttribute(t,i(r)),e),S=(e,t)=>(e.append(t),t),C=(e,t,r)=>(e=o(e)?l.createElement(e):e,n(t)&&(r=t,t=!1),o(t)&&A(e,t),n(r)&&((e,t)=>{let r;for(let n in t)r=t[n],r||""===r||0===r?O(e,n,r):T(e,n)})(e,r),e),A=(e,t,r=!0)=>{let n="innerHTML";return w(e,n)&&(e[n]=r?t.trim():t),e},F=(e,t)=>(E(e).insertBefore(t,e),t),R=e=>C(...e),D=a.history,M=a.location,N=l.currentScript,B=(e,t,r)=>{t.removeEventListener(e,r)},P=(e,t,r,n=!1)=>{t.addEventListener(e,r,n)};function U(e,t){const r=this;return s($[e])?($[e].forEach((e=>e.apply(r,t))),r):r}const $={};function I(e,t){const r=this;if(!s(e))return $={},r;if(s($[e]))if(s(t)){for(let r=0,n=$[e].length;r<n;++r)if(t===$[e][r]){$[e].splice(r,1);break}0===j&&delete $[e]}else delete $[e];return r}function J(e,t){return s($[e])||($[e]=[]),s(t)&&$[e].push(t),this}const G=(e,t)=>(e=>r(e,RegExp))(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,s(t)?t:"g"));var K,X,_="F3H",z="GET",Q="document",V="text",W="//"+M.hostname;function Y(e){return oe(e)?"submit":"click"}function Z(e){return e.split("#")[1]||""}function ee(e){for(var t,r,n,s={},o=y("link[rel=dns-prefetch],link[rel=preconnect],link[rel=prefetch],link[rel=preload],link[rel=prerender]",e),i=0,u=o.length;i<u;++i)ie(r=o[i])||(r.id=t=r.id||"F3H:"+pe(d(r,"href")||q(r)),s[t]=n=h(r),s[t][n.length-1].href=r.href);return s}function te(){return M.href}function re(e){for(var t,r,n,s={},o=y("script",e),i=0,u=o.length;i<u;++i)ue(r=o[i])||(r.id=t=r.id||"F3H:"+pe(d(r,"src")||q(r)),s[t]=n=h(r),s[t][n.length-1].src=r.src);return s}function ne(e){for(var t,r,n,s={},o=y("link[rel=stylesheet],style",e),i=0,u=o.length;i<u;++i)ce(r=o[i])||(r.id=t=r.id||"F3H:"+pe(d(r,"href")||q(r)),s[t]=n=h(r),"link"===n[0]&&(s[t][n.length-1].href=r.href));return s}function se(e,t){return e?l.getElementById(e)||(t?l.getElementsByName(e)[0]:null):null}function oe(e){return"form"===g(e)}function ie(e){var t=u(_);return x(e,"data-"+t)||x(e,t)?1:0}function ue(e){if(e.src&&N.src===e.src)return 1;var t=u(_);return x(e,"data-"+t)||x(e,t)||G("\\bF3H\\b").test(q(e)||"")?1:0}function ce(e){var t=u(_);return x(e,"data-"+t)||x(e,t)?1:0}function fe(e){return e.split("#")[0]}function le(e){return e.replace(/\/+$/,"")}function ae(e){e.preventDefault()}function pe(e){var t,r=0,n=e.length;if(0===n)return r;for(t=0;t<n;++t)r=(r<<5)-r+e.charCodeAt(t),r&=r;return r<1?-1*r:r}function he(e){var t,r,n,s,o={},i=e.getAllResponseHeaders().trim().split(/[\r\n]+/);for(t in i)r=i[t].split(": "),n=u(r.shift()),u(s=r.join(": ")),o[n]=f(s);return new Proxy(o,{get:function(e,t){return e[u(t)]||null},set:function(e,t,r){e[u(t)]=r}})}function de(e,o){void 0===e&&(e=l),void 0===o&&(o={});var i,u=this;if(!r(u,de))return new de(e,o);s(e)&&(!1!==(i=e)&&!0!==i)&&!n(e)||(o=e,e=l),u.state=Object.assign({},de.state,!0===o?{cache:o}:o||{}),u.source=e;var f=v(u.state.sources);u.state.turbo&&(u.state.cache=!0),de.instances[u.source.id||u.source.name||Object.keys(de.instances).length]=u,u.caches={},u.hooks=$,u.links={},u.lot={},u.ref=null,u.requests={},u.scripts={},u.status=null,u.styles={};var h=null,d=te();function v(e,r){var n=y(e,r,u.source),s=te();if(t(u.state.is)){var o=[];return n.forEach((function(e){u.state.is.call(u,e,s)&&o.push(e)})),o}return n}function b(e){e!==te()&&u.state.history&&D.pushState({},"",e)}function g(e,t,r){var n,s=(e=>e===a)(e),o=u.state.history;if(z!==t||e!==h||s){if(h=e,d=u.ref=r,u.fire("exit",[l,e]),u.state.cache){var i=u.caches[le(fe(r))];if(i)return u.lot=i[2],u.status=i[0],i[3]&&!s&&o&&T(p),b(r),n=[i[1],e],i[3]&&(u.links=j(n[0])),i[3]&&(u.styles=M(n[0])),u.fire("success",n),u.fire(i[0],n),f=v(u.state.sources),i[3]&&(u.scripts=A(n[0])),ve(n),void u.fire("enter",n)}var c,m,y,k,E=x(e,t,r,u.state.lot),q=E.upload,L=Q===E.responseType;return P("abort",E,(function(){w(),u.fire("abort",[E.response,e])})),P("error",E,c=function(){w(),L&&!s&&o&&T(p),n=[E.response,e],L&&(u.links=j(n[0])),L&&(u.styles=M(n[0])),u.fire("error",n),f=v(u.state.sources),L&&(u.scripts=A(n[0])),ve(n),u.fire("enter",n)}),P("error",q,c),P("load",E,c=function(){if(w(),n=[E.response,e],y=E.responseURL,k>=300&&k<400){var t=le(y);return u.caches[t]&&delete u.caches[t],u.fire("success",n),u.fire(k,n),void g(h=a,z,y||r)}b(-1===r.indexOf("#")&&y||r),L&&(u.styles=M(n[0])),u.fire("success",n),u.fire(k,n),L&&o&&T(p),f=v(u.state.sources),L&&(u.scripts=A(n[0])),ve(n),u.fire("enter",n)}),P("load",q,c),P("progress",E,(function(e){w(),u.fire("pull",e.lengthComputable?[e.loaded,e.total]:[0,-1])})),P("progress",q,(function(e){w(),u.fire("push",e.lengthComputable?[e.loaded,e.total]:[0,-1])})),E}function w(){m=he(E),k=E.status,z===t&&u.state.cache&&k&&(u.caches[le(fe(r))]=[k,E.response,m,L]),u.lot=m,u.status=k}}function E(e){u.requests[e]&&u.requests[e][0]&&(u.requests[e][0].abort(),delete u.requests[e])}function q(){for(var e in u.requests)E(e)}function x(e,r,s,o){s=t(u.state.ref)?u.state.ref.call(u,e,s):s;var i,f=new XMLHttpRequest,l=c(s.split(/[?&#]/)[0].split("/").pop().split(".")[1]||""),a=u.state.types[l]||u.state.type||V;if(t(a)&&(a=a.call(u,s)),f.responseType=a,f.open(r,s,!0),n(o))for(i in o)f.setRequestHeader(i,o[i]);return f.send("POST"===r?new FormData(e):null),f}function w(e,t){var r,n=x(e,z,t);P("load",n,(function(){200===(r=n.status)&&(u.caches[le(fe(t))]=[r,n.response,he(n),Q===n.responseType])}))}function T(e){e&&(p.scrollLeft=K.scrollLeft=e.offsetLeft,p.scrollTop=K.scrollTop=e.offsetTop)}function O(e,t,r,n){var s,o,i,c=r(e),f={};for(s in t)(o=m("#"+s.replace(/[:.]/g,"\\$&"),u.source))&&(f[s]=k(o)),c[s]||(delete t[s],H(se(s)));for(s in c)t[s]||(t[s]=i=c[s],f[s]&&L(f[s])?F(f[s],R(i)):n&&S(n,R(i)));return t}function j(e){return O(e,u.links,ee,X)}function A(e){return O(e,u.scripts,re,K)}function M(e){return O(e,u.styles,ne,X)}function N(){P("keydown",l,ue),P("keyup",l,ce),K=l.body,X=l.head,u.links=ee(),u.scripts=re(),u.styles=ne(),ve([l,a]),u.state.cache&&w(a,te())}function G(e){if(q(),!ie){var t,r=this,n=r.href,s=r.action,o=n||s,i=c(r.method||z);z===i&&(oe(r)&&(t=new URLSearchParams(new FormData(r))+"",o=le(o.split(/[?&#]/)[0])+(t?"?"+t:"")),u.state.turbo&&b(o)),u.requests[o]=[g(r,i,o),r],ae(e)}}function _(e){T(se(Z(te()),1)),ae(e)}function W(){var e=this,t=e.href;u.caches[le(fe(t))]||w(e,t),B("mousemove",e,W)}var ie=!1;function ue(e){ie=e.ctrlKey}function ce(){ie=!1}function pe(e){q();var t=te();Z(t)&&fe(d)===fe(t)||(u.requests[t]=[g(a,z,t),a])}function ve(e){var t=u.state.turbo;f.forEach((function(e){var r,n,s;P(Y(e),e,G),oe(e)?(r=e,n=C("input",{type:"hidden"}),s=y("[name][type=submit][value]",r,u.source),S(r,n),s.forEach((function(e){P("click",e,(function(){n.name=this.name,n.value=this.value}))}))):t&&function(e){P("mousemove",e,W)}(e)})),function(e){if(u.hooks.focus)u.fire("focus",e);else{var t=m("[autofocus]",u.source);t&&t.focus()}}(e),function(e){u.hooks.scroll?u.fire("scroll",e):T(se(Z(te()),1))}(e)}return u.abort=function(e){return e?u.requests[e]&&E(e):q(),u},u.fetch=function(e,t,r){return x(r,t,e)},u.fire=U.bind(u),u.off=I.bind(u),u.on=J.bind(u),u.pop=function(){return f.forEach((function(e){P(Y(e),e,G)})),B("DOMContentLoaded",a,N),B("hashchange",a,_),B("keydown",l,ue),B("keyup",l,ce),B("popstate",a,pe),u.fire("pop",[l,a]),u.abort()},P("DOMContentLoaded",a,N),P("hashchange",a,_),P("popstate",a,pe),u}return de.instances={},de.state={cache:!1,history:!0,is:function(e,t){var r=e.target,n=d(e,"href")||d(e,"action")||"",s=e.href||e.action||"";return(!r||"_self"===r)&&("#"!==n[0]&&!/^(data|javascript|mailto):/.test(n)&&((!Z(s)||fe(t)!==fe(s))&&(""===n||0===n.search(/[.\/?]/)||0===n.indexOf(W)||0===n.indexOf(M.protocol+W)||-1===n.indexOf("://"))))},lot:{"x-requested-with":_},ref:function(e,t){return t},sources:"a[href],form",turbo:!1,type:Q,types:{"":Q,CSS:V,JS:V,JSON:"json"}},de.version="1.1.4",de}));