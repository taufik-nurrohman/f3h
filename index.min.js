/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/f3h>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).F3H=t()}(this,(function(){"use strict";var n=function(n){return Array.isArray(n)},t=function(n){return"function"==typeof n},e=function(n,t){return n&&u(t)&&n instanceof t},r=function(n,t){return void 0===t&&(t=!0),"object"==typeof n&&(!t||e(n,Object))},u=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},o=function(n){return"string"==typeof n},i=function t(e){if(n(e))return e.map((function(n){return t(e)}));if(r(e)){for(var u in e)e[u]=t(e[u]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},f=function(n){return n.toLowerCase()},c=function(n){return n.toUpperCase()},s=function(n){return n.length},a=function(n){return Object.keys(n)},l=function t(e){if(n(e))return e.map((function(n){return t(n)}));if(function(n){return/^-?(?:\d*.)?\d+$/.test(n+"")}(e))return function(n,t){return void 0===t&&(t=10),t?parseInt(n,t):parseFloat(n)}(e);if(r(e)){for(var u in e)e[u]=t(e[u]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},p=document,d=window,v=p.documentElement,h=function(n){var t=y(n),e=k(n),r=E(n);return!1!==e?[r,e,t]:[r,t]},m=function(n,t,e){if(void 0===e&&(e=!0),!w(n,t))return null;var r=n.getAttribute(t);return e?l(r):r},y=function(n,t){void 0===t&&(t=!0);for(var e,r=n.attributes,u={},o=0,i=r.length;o<i;++o)e=r[o].value,u[r[o].name]=t?l(e):e;return u},b=function(n,t){return(t||p).querySelector(n)},g=function(n,t){return(t||p).querySelectorAll(n)},k=function(n,t){void 0===t&&(t=!0);var e="innerHTML";if(!O(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},E=function(n){return f(n&&n.nodeName||"")||null},H=function(n){return n.nextElementSibling||null},x=function(n){return n.parentNode||null},F=function(n,t){void 0===t&&(t=!0);var e="textContent";if(!O(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},w=function(n,t){return n.hasAttribute(t)},L=function(n){return null!==x(n)},O=function(n,t){return t in n},S=function(n,t){return n.removeAttribute(t),n},T=function(n){var t=x(n);return n.remove(),t},A=function(n,t,e){return!0===e&&(e=t),n.setAttribute(t,i(e)),n},C=function(n,t){return n.append(t),t},R=function(n,t,e){return n=o(n)?p.createElement(n):n,r(t)&&(e=t,t=!1),o(t)&&q(n,t),r(e)&&function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?A(n,r,e):S(n,r)}(n,e),n},q=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="innerHTML";return O(n,r)&&(n[r]=e?t.trim():t),n},D=function(n,t){return x(n).insertBefore(t,n),t},M=function(n){return R.apply(void 0,n)},N=d.history,B=d.location,P=p.currentScript,U=function(n){return n&&n.preventDefault()},$=function(n,t,e){t.removeEventListener(n,e)},I=function(n,t,e,r){void 0===r&&(r=!1),t.addEventListener(n,e,r)};var J,G,K=function(n,t){return function(n){return e(n,RegExp)}(n)?n:(n=n.replace(/\//g,"\\/"),RegExp(n,u(t)?t:"g"))},X=function(n,t){return n.scrollLeft=t[0],n.scrollTop=t[1],n},_="F3H",z="GET",Q="document",V="text",W="//"+B.hostname;function Y(n){return on(n)?"submit":"click"}function Z(n){return n.split("#")[1]||""}function nn(n){for(var t,e,r,u,o,i,c={},a=g("link[rel=dns-prefetch],link[rel=preconnect],link[rel=prefetch],link[rel=preload],link[rel=prerender]",n),p=0,d=s(a);p<d;++p)o=r=a[p],i=void 0,i=f(_),l(m(o,"data-"+i)||m(o,i))||(e=m(r,"href"),r.id=t=r.id||"F3H:"+ln(e||F(r)),c[t]=u=h(r),e&&(c[t][s(u)-1].href=r.href));return c}function tn(){return an(B.href)}function en(n){for(var t,e,r,u,o={},i=g("script",n),f=0,c=s(i);f<c;++f)fn(r=i[f])||(e=m(r,"src"),r.id=t=r.id||"F3H:"+ln(e||F(r)),o[t]=u=h(r),e&&(o[t][s(u)-1].src=r.src));return o}function rn(n){for(var t,e,r,u,o,i,c={},a=g("link[rel=stylesheet],style",n),p=0,d=s(a);p<d;++p)o=r=a[p],i=void 0,i=f(_),l(m(o,"data-"+i)||m(o,i))||(e=m(r,"href"),r.id=t=r.id||"F3H:"+ln(e||F(r)),c[t]=u=h(r),e&&(c[t][s(u)-1].href=r.href));return c}function un(n,t){return n?p.getElementById(n)||(t?p.getElementsByName(n)[0]:null):null}function on(n){return"form"===E(n)}function fn(n){if(n.src&&P.src===n.src)return 1;var t=f(_);return l(m(n,"data-"+t)||m(n,t))||K("\\bF3H\\b").test(F(n)||"")?1:0}function cn(n){var t=f(_);return w(n,"data-"+t)||w(n,t)?l(m(n,"data-"+t)||m(n,t))?1:0:1}function sn(n){return n.split("#")[0]}function an(n){return n.replace(/\/+(?=[?&#]|$)/,"")}function ln(n){var t,e=s(n),r=0;if(0===e)return r;for(t=0;t<e;++t)r=(r<<5)-r+n.charCodeAt(t),r&=r;return r<1?-1*r:r}function pn(n){var t,e,r={},u=n.getAllResponseHeaders().trim().split(/[\r\n]+/);for(t in u)e=u[t].split(": "),r[f(e.shift())]=l(e.join(": "));return new Proxy(r,{get:function(n,t){return n[f(t)]||null},set:function(n,t,e){n[f(t)]=e}})}function dn(n,o){void 0===n&&(n=p),void 0===o&&(o={});var i,f=this;if(!e(f,dn))return new dn(n,o);if(u(n)&&(!1!==(i=n)&&!0!==i)&&!r(n)||(o=n,n=p),!n.F3H){f.state=o=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return Object.assign.apply(Object,[{}].concat(t))}(dn.state,!0===o?{cache:o}:o||{}),f.source=n,o.turbo&&(o.cache=!0);var l={},h=null,m=null,y=null,k=tn(),E=k,x={},F=null,w=K(o.sources),O=null,S=null,A=function(n){var t={};return n.hooks=t,n.fire=function(e,r){return u(t[e])?(t[e].forEach((function(t){return t.apply(n,r)})),n):n},n.off=function(e,r){if(!u(e))return t={},n;if(u(t[e]))if(u(r)){for(var o=0,i=t[e].length;o<i;++o)if(r===t[e][o]){t[e].splice(o,1);break}0===j&&delete t[e]}else delete t[e];return n},n.on=function(e,r){return u(t[e])||(t[e]=[]),u(r)&&t[e].push(r),n},n}(f),q=A.fire,B=A.hooks;dn.instances[n.id||n.name||function(n){return s(a(n))}(dn.instances)]=f,n.F3H=1;var P=!1;return f.abort=function(n){return n?x[n]&&fn(n):ln(),f},f.caches=l,f.fetch=function(n,t,e){return vn(e,t,n)},f.links=h,f.lot=null,f.ref=null,f.scripts=F,f.state=o,f.styles=S,f.status=null,f.pop=function(){return n.F3H?(delete n.F3H,w.forEach((function(n){I(Y(n),n,Hn)})),$("DOMContentLoaded",d,En),$("hashchange",d,xn),$("keydown",p,wn),$("keyup",p,Ln),$("popstate",d,On),q("pop",[p,d]),f.abort()):f},I("DOMContentLoaded",d,En),I("hashchange",d,xn),I("popstate",d,On),f}function K(n,e){k=tn();var r=g(n,e),u=[];return t(o.is)?r.forEach((function(n){o.is.call(f,n,k)&&cn(n)&&u.push(n)})):r.forEach((function(n){cn(n)&&u.push(n)})),u}function _(n){n!==tn()&&o.history&&N.pushState({},"",n)}function W(n,t,e){var r,u=function(n){return n===d}(n),i=o.history;if(z!==t||n!==y||u){if(y=n,f.ref=an(E=e),q("exit",[p,n]),o.cache){var c=l[an(sn(e))];if(c)return f.lot=m=c[2],f.status=O=c[0],c[3]&&!u&&i&&mn(v),_(e),r=[c[1],n],c[3]&&(h=bn(r[0])),c[3]&&(S=kn(r[0])),q("success",r),q(c[0],r),w=K(o.sources),c[3]&&(F=gn(r[0])),Sn(r),void q("enter",r)}var s,a,b=vn(n,t,e,o.lot),g=b.upload,k=Q===b.responseType;return I("abort",b,(function(){H(),q("abort",[b.response,n])})),I("error",b,s=function(){H(),k&&!u&&i&&mn(v),r=[b.response,n],k&&(h=bn(r[0])),k&&(S=kn(r[0])),q("error",r),w=K(o.sources),k&&(F=gn(r[0])),Sn(r),q("enter",r)}),I("error",g,s),I("load",b,s=function(){if(H(),r=[b.response,n],a=b.responseURL,O>=300&&O<400){var t=an(sn(a));return l[t]&&delete l[t],q("success",r),q(O,r),void W(y=d,z,a||e)}_(-1===e.indexOf("#")&&a||e),k&&(S=kn(r[0])),q("success",r),q(O,r),k&&i&&mn(v),w=K(o.sources),k&&(F=gn(r[0])),Sn(r),q("enter",r)}),I("load",g,s),I("progress",b,(function(n){H(),q("pull",n.lengthComputable?[n.loaded,n.total]:[0,-1])})),I("progress",g,(function(n){H(),q("push",n.lengthComputable?[n.loaded,n.total]:[0,-1])})),b}function H(){m=pn(b),O=b.status,z===t&&o.cache&&O&&(l[an(sn(e))]=[O,b.response,m,k]),f.lot=m,f.status=O}}function fn(n){x[n]&&x[n][0]&&(x[n][0].abort(),delete x[n])}function ln(){for(var n in x)fn(n)}function vn(n,e,u,i){u=t(o.ref)?o.ref.call(f,n,u):u;var s,a=new XMLHttpRequest,l=c(u.split(/[?&#]/)[0].split("/").pop().split(".")[1]||""),p=o.types[l]||o.type||V;if(t(p)&&(p=p.call(f,u)),a.responseType=p,a.open(e,u,!0),r(i))for(s in i)a.setRequestHeader(s,i[s]);return a.send("POST"===e?new FormData(n):null),a}function hn(n,t){var e=vn(n,z,t);I("load",e,(function(){200===(O=e.status)&&(l[an(sn(t))]=[O,e.response,pn(e),Q===e.responseType])}))}function mn(n){if(n){var t=function(n){return[n.offsetLeft,n.offsetTop]}(n);X(J,t),X(v,t)}}function yn(t,e,r,u){var o,i,f,c=r(t),s={};for(o in e)if((i=b("#"+o.replace(/[:.]/g,"\\$&"),n))&&(s[o]=H(i)),!c[o]){delete e[o];var a=un(o);a&&T(a)}for(o in c)e[o]||(e[o]=f=c[o],s[o]&&L(s[o])?D(s[o],M(f)):u&&C(u,M(f)));return e}function bn(n){return yn(n,h,nn,G)}function gn(n){return yn(n,F,en,J)}function kn(n){return yn(n,S,rn,G)}function En(){I("keydown",p,wn),I("keyup",p,Ln),J=p.body,G=p.head,f.links=h=nn(),f.scripts=F=en(),f.styles=S=rn(),Sn([p,d]),o.cache&&hn(d,tn())}function Hn(n){if(ln(),!P){var t,e=this,r=e.href,u=e.action,i=an(r||u),f=c(e.method||z);z===f&&(on(e)&&(t=new URLSearchParams(new FormData(e))+"",i=i.split(/[?&#]/)[0]+(t?"?"+t:"")),o.turbo&&_(i)),x[i]=[W(e,f,i),e],U(n)}}function xn(n){mn(un(Z(tn()),1)),U(n)}function Fn(){var n=this,t=n.href;l[an(sn(t))]||hn(n,t),$("mousemove",n,Fn)}function wn(n){P=n.ctrlKey}function Ln(){P=!1}function On(n){k=tn(),ln(),Z(k)&&sn(E)===sn(k)||(x[k]=[W(d,z,k),d])}function Sn(t){var e=o.turbo;w.forEach((function(n){var t,r,u;I(Y(n),n,Hn),on(n)?(t=n,r=R("input",{type:"hidden"}),u=g("[name][type=submit][value]",t),C(t,r),u.forEach((function(n){I("click",n,(function(){r.name=this.name,r.value=this.value}))}))):e&&function(n){I("mousemove",n,Fn)}(n)})),function(t){if(B.focus)q("focus",t);else{var e=b("[autofocus]",n);e&&e.focus()}}(t),function(n){B.scroll?q("scroll",n):mn(un(Z(tn()),1))}(t)}}return dn.instances={},dn.state={cache:!1,history:!0,is:function(n,t){var e=n.target,r=m(n,"href")||m(n,"action")||"",u=n.href||n.action||"";return(!e||"_self"===e)&&("#"!==r[0]&&!/^(data|javascript|mailto):/.test(r)&&((!Z(u)||sn(t)!==sn(u))&&(""===r||0===r.search(/[.\/?]/)||0===r.indexOf(W)||0===r.indexOf(B.protocol+W)||-1===r.indexOf("://"))))},lot:{"x-requested-with":_},ref:function(n,t){return t},sources:"a[href],form",turbo:!1,type:Q,types:{"":Q,CSS:V,JS:V,JSON:"json"}},dn.version="1.1.19",dn}));