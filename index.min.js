/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2020 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/f3h>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).F3H=t()}(this,(function(){"use strict";const e=e=>Array.isArray(e),t=e=>"function"==typeof e,n=(e,t)=>e&&o(t)&&e instanceof t,r=(e,t=!0)=>"object"==typeof e&&(!t||n(e,Object)),o=e=>(e=>void 0!==e)(e)&&!(e=>null===e)(e),u=e=>"string"==typeof e,i=t=>{if(e(t))return t.map((e=>i(t)));if(r(t)){for(let e in t)t[e]=i(t[e]);return t}return!1===t?"false":null===t?"null":!0===t?"true":""+t},s=e=>e.toLowerCase(),l=e=>e.toUpperCase(),f=t=>{if(e(t))return t.map((e=>f(e)));if((e=>/^-?(?:\d*.)?\d+$/.test(e+""))(t))return((e,t=10)=>parseInt(e,t))(t);if(r(t)){for(let e in t)t[e]=f(t[e]);return t}return{false:!1,null:null,true:!0}[t]||t},c=document,a=window,p=c.documentElement,d=e=>{let t=v(e),n=b(e),r=g(e);return!1!==n?[r,n,t]:[r,t]},h=(e,t,n=!0)=>{if(!x(e,t))return null;let r=e.getAttribute(t);return n?f(r):r},v=(e,t=!0)=>{let n,r=e.attributes,o={};for(let e=0,u=r.length;e<u;++e)n=r[e].value,o[r[e].name]=t?f(n):n;return o},m=(e,t)=>(t||c).querySelector(e),y=(e,t)=>(t||c).querySelectorAll(e),b=(e,t=!0)=>{let n="innerHTML";if(!w(e,n))return!1;let r=e[n];return r=t?r.trim():r,""!==r?r:null},g=e=>{let t=s(e.nodeName||"");return""!==t?t:null},k=e=>e.nextElementSibling||null,E=e=>e.parentNode||null,H=(e,t=!0)=>{let n="textContent";if(!w(e,n))return!1;let r=e[n];return r=t?r.trim():r,""!==r?r:null},x=(e,t)=>e.hasAttribute(t),L=e=>null!==E(e),w=(e,t)=>t in e,F=(e,t)=>(e.removeAttribute(t),e),T=e=>{let t=E(e);return e.remove(),t},O=(e,t,n)=>(!0===n&&(n=t),e.setAttribute(t,i(n)),e),S=(e,t)=>(e.append(t),t),A=(e,t,n)=>(e=u(e)?c.createElement(e):e,r(t)&&(n=t,t=!1),u(t)&&C(e,t),r(n)&&((e,t)=>{let n;for(let r in t)n=t[r],n||""===n||0===n?O(e,r,n):F(e,r)})(e,n),e),C=(e,t,n=!0)=>{let r="innerHTML";return w(e,r)&&(e[r]=n?t.trim():t),e},R=(e,t)=>(E(e).insertBefore(t,e),t),q=e=>A(...e),D=a.history,M=a.location,N=c.currentScript,B=e=>e&&e.preventDefault(),P=(e,t,n)=>{t.removeEventListener(e,n)},U=(e,t,n,r=!1)=>{t.addEventListener(e,n,r)};function $(e,t){const n=this;return o(I[e])?(I[e].forEach((e=>e.apply(n,t))),n):n}const I={};function J(e,t){const n=this;if(!o(e))return I={},n;if(o(I[e]))if(o(t)){for(let n=0,r=I[e].length;n<r;++n)if(t===I[e][n]){I[e].splice(n,1);break}0===j&&delete I[e]}else delete I[e];return n}function G(e,t){return o(I[e])||(I[e]=[]),o(t)&&I[e].push(t),this}const K=(e,t)=>(e=>n(e,RegExp))(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,o(t)?t:"g"));var X,_,z="F3H",Q="GET",V="document",W="text",Y="//"+M.hostname;function Z(e){return e.length}function ee(e){return se(e)?"submit":"click"}function te(e){return e.split("#")[1]||""}function ne(e){for(var t,n,r,o={},u=y("link[rel=dns-prefetch],link[rel=preconnect],link[rel=prefetch],link[rel=preload],link[rel=prerender]",e),i=0,s=Z(u);i<s;++i)le(n=u[i])||(n.id=t=n.id||"F3H:"+de(h(n,"href")||H(n)),o[t]=r=d(n),o[t][Z(r)-1].href=n.href);return o}function re(){return pe(M.href)}function oe(e){for(var t,n,r,o={},u=y("script",e),i=0,s=Z(u);i<s;++i)fe(n=u[i])||(n.id=t=n.id||"F3H:"+de(h(n,"src")||H(n)),o[t]=r=d(n),o[t][Z(r)-1].src=n.src);return o}function ue(e){for(var t,n,r,o={},u=y("link[rel=stylesheet],style",e),i=0,s=Z(u);i<s;++i)ce(n=u[i])||(n.id=t=n.id||"F3H:"+de(h(n,"href")||H(n)),o[t]=r=d(n),"link"===r[0]&&(o[t][Z(r)-1].href=n.href));return o}function ie(e,t){return e?c.getElementById(e)||(t?c.getElementsByName(e)[0]:null):null}function se(e){return"form"===g(e)}function le(e){var t=s(z);return x(e,"data-"+t)||x(e,t)?1:0}function fe(e){if(e.src&&N.src===e.src)return 1;var t=s(z);return x(e,"data-"+t)||x(e,t)||K("\\bF3H\\b").test(H(e)||"")?1:0}function ce(e){var t=s(z);return x(e,"data-"+t)||x(e,t)?1:0}function ae(e){return e.split("#")[0]}function pe(e){return e.replace(/\/+(?=[?&#]|$)/,"")}function de(e){var t,n=0,r=Z(e);if(0===r)return n;for(t=0;t<r;++t)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n<1?-1*n:n}function he(e){var t,n,r,o,u={},i=e.getAllResponseHeaders().trim().split(/[\r\n]+/);for(t in i)n=i[t].split(": "),r=s(n.shift()),s(o=n.join(": ")),u[r]=f(o);return new Proxy(u,{get:function(e,t){return e[s(t)]||null},set:function(e,t,n){e[s(t)]=n}})}function ve(e,u){void 0===e&&(e=c),void 0===u&&(u={});var i,s=this;if(!n(s,ve))return new ve(e,u);if(o(e)&&(!1!==(i=e)&&!0!==i)&&!r(e)||(u=e,e=c),e.F3H)return s;s.state=u=Object.assign({},ve.state,!0===u?{cache:u}:u||{}),s.source=e;var f=$.bind(s),d=J.bind(s),h=G.bind(s);u.turbo&&(u.cache=!0);var v={},b=null,g=null,E=null,H=re(),x=H,w={},F=null,O=M(u.sources),j=null,C=null;function M(e,n){H=re();var r=y(e,n);if(t(u.is)){var o=[];return r.forEach((function(e){u.is.call(s,e,H)&&o.push(e)})),o}return r}function N(e){e!==re()&&u.history&&D.pushState({},"",e)}function K(e,t,n){var r,o=(e=>e===a)(e),i=u.history;if(Q!==t||e!==E||o){if(E=e,s.ref=pe(x=n),f("exit",[c,e]),u.cache){var l=v[pe(ae(n))];if(l)return s.lot=g=l[2],s.status=j=l[0],l[3]&&!o&&i&&ce(p),N(n),r=[l[1],e],l[3]&&(b=me(r[0])),l[3]&&(C=be(r[0])),f("success",r),f(l[0],r),O=M(u.sources),l[3]&&(F=ye(r[0])),Te(r),void f("enter",r)}var d,h,m=le(e,t,n,u.lot),y=m.upload,k=V===m.responseType;return U("abort",m,(function(){H(),f("abort",[m.response,e])})),U("error",m,d=function(){H(),k&&!o&&i&&ce(p),r=[m.response,e],k&&(b=me(r[0])),k&&(C=be(r[0])),f("error",r),O=M(u.sources),k&&(F=ye(r[0])),Te(r),f("enter",r)}),U("error",y,d),U("load",m,d=function(){if(H(),r=[m.response,e],h=m.responseURL,j>=300&&j<400){var t=pe(h);return v[t]&&delete v[t],f("success",r),f(j,r),void K(E=a,Q,h||n)}N(-1===n.indexOf("#")&&h||n),k&&(C=be(r[0])),f("success",r),f(j,r),k&&i&&ce(p),O=M(u.sources),k&&(F=ye(r[0])),Te(r),f("enter",r)}),U("load",y,d),U("progress",m,(function(e){H(),f("pull",e.lengthComputable?[e.loaded,e.total]:[0,-1])})),U("progress",y,(function(e){H(),f("push",e.lengthComputable?[e.loaded,e.total]:[0,-1])})),m}function H(){g=he(m),j=m.status,Q===t&&u.cache&&j&&(v[pe(ae(n))]=[j,m.response,g,k]),s.lot=g,s.status=j}}function z(e){w[e]&&w[e][0]&&(w[e][0].abort(),delete w[e])}function Y(){for(var e in w)z(e)}function le(e,n,o,i){o=t(u.ref)?u.ref.call(s,e,o):o;var f,c=new XMLHttpRequest,a=l(o.split(/[?&#]/)[0].split("/").pop().split(".")[1]||""),p=u.types[a]||u.type||W;if(t(p)&&(p=p.call(s,o)),c.responseType=p,c.open(n,o,!0),r(i))for(f in i)c.setRequestHeader(f,i[f]);return c.send("POST"===n?new FormData(e):null),c}function fe(e,t){var n=le(e,Q,t);U("load",n,(function(){200===(j=n.status)&&(v[pe(ae(t))]=[j,n.response,he(n),V===n.responseType])}))}function ce(e){e&&(p.scrollLeft=X.scrollLeft=e.offsetLeft,p.scrollTop=X.scrollTop=e.offsetTop)}function de(t,n,r,o){var u,i,s,l=r(t),f={};for(u in n)(i=m("#"+u.replace(/[:.]/g,"\\$&"),e))&&(f[u]=k(i)),l[u]||(delete n[u],T(ie(u)));for(u in l)n[u]||(n[u]=s=l[u],f[u]&&L(f[u])?R(f[u],q(s)):o&&S(o,q(s)));return n}function me(e){return de(e,b,ne,_)}function ye(e){return de(e,F,oe,X)}function be(e){return de(e,C,ue,_)}function ge(){U("keydown",c,Le),U("keyup",c,we),X=c.body,_=c.head,s.links=b=ne(),s.scripts=F=oe(),s.styles=C=ue(),Te([c,a]),u.cache&&fe(a,re())}function ke(e){if(Y(),!xe){var t,n=this,r=n.href,o=n.action,i=r||o,s=l(n.method||Q);Q===s&&(se(n)&&(t=new URLSearchParams(new FormData(n))+"",i=pe(i.split(/[?&#]/)[0])+(t?"?"+t:"")),u.turbo&&N(i)),w[i]=[K(n,s,i),n],B(e)}}function Ee(e){ce(ie(te(re()),1)),B(e)}function He(){var e=this,t=e.href;v[pe(ae(t))]||fe(e,t),P("mousemove",e,He)}ve.instances[e.id||e.name||Z(Object.keys(ve.instances))]=s,e.F3H=1;var xe=!1;function Le(e){xe=e.ctrlKey}function we(){xe=!1}function Fe(e){H=re(),Y(),te(H)&&ae(x)===ae(H)||(w[H]=[K(a,Q,H),a])}function Te(t){var n=u.turbo;O.forEach((function(e){var t,r,o;U(ee(e),e,ke),se(e)?(t=e,r=A("input",{type:"hidden"}),o=y("[name][type=submit][value]",t),S(t,r),o.forEach((function(e){U("click",e,(function(){r.name=this.name,r.value=this.value}))}))):n&&function(e){U("mousemove",e,He)}(e)})),function(t){if(I.focus)f("focus",t);else{var n=m("[autofocus]",e);n&&n.focus()}}(t),function(e){I.scroll?f("scroll",e):ce(ie(te(re()),1))}(t)}return s.abort=function(e){return e?w[e]&&z(e):Y(),s},s.caches=v,s.fetch=function(e,t,n){return le(n,t,e)},s.fire=f,s.hooks=I,s.links=b,s.lot=null,s.off=d,s.on=h,s.ref=null,s.scripts=F,s.state=u,s.styles=C,s.status=null,s.pop=function(){return e.F3H?(delete e.F3H,O.forEach((function(e){U(ee(e),e,ke)})),P("DOMContentLoaded",a,ge),P("hashchange",a,Ee),P("keydown",c,Le),P("keyup",c,we),P("popstate",a,Fe),f("pop",[c,a]),s.abort()):s},U("DOMContentLoaded",a,ge),U("hashchange",a,Ee),U("popstate",a,Fe),s}return ve.instances={},ve.state={cache:!1,history:!0,is:function(e,t){var n=e.target,r=h(e,"href")||h(e,"action")||"",o=e.href||e.action||"";return(!n||"_self"===n)&&("#"!==r[0]&&!/^(data|javascript|mailto):/.test(r)&&((!te(o)||ae(t)!==ae(o))&&(""===r||0===r.search(/[.\/?]/)||0===r.indexOf(Y)||0===r.indexOf(M.protocol+Y)||-1===r.indexOf("://"))))},lot:{"x-requested-with":z},ref:function(e,t){return t},sources:"a[href],form",turbo:!1,type:V,types:{"":V,CSS:W,JS:W,JSON:"json"}},ve.version="1.1.6",ve}));