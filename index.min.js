/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2020 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/f3h>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).F3H=t()}(this,(function(){"use strict";var n=function(n){return Array.isArray(n)},t=function(n){return"function"==typeof n},r=function(n,t){return n&&o(t)&&n instanceof t},e=function(n){return/^-?(?:\d*.)?\d+$/.test(n+"")},u=function(n,t){return void 0===t&&(t=!0),"object"==typeof n&&(!t||r(n,Object))},o=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},i=function(n){return"string"==typeof n},f=function t(r){if(n(r))return r.map((function(n){return t(r)}));if(u(r)){for(var e in r)r[e]=t(r[e]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},c=function t(r){if(n(r))return r.map((function(n){return t(n)}));if(e(r))return function(n,t){return void 0===t&&(t=10),parseInt(n,t)}(r);if(u(r)){for(var o in r)r[o]=t(r[o]);return r}return{false:!1,null:null,true:!0}[r]||r},s=document,a=window,l=s.documentElement,p=function(n){var t=v(n),r=y(n),e=b(n);return!1!==r?[e,r,t]:[e,t]},d=function(n,t,r){if(void 0===r&&(r=!0),!H(n,t))return null;var e=n.getAttribute(t);return r?c(e):e},v=function(n,t){void 0===t&&(t=!0);for(var r,e=n.attributes,u={},o=0,i=e.length;o<i;++o)r=e[o].value,u[e[o].name]=t?c(r):r;return u},h=function(n,t){return(t||s).querySelector(n)},m=function(n,t){return(t||s).querySelectorAll(n)},y=function(n,t){void 0===t&&(t=!0);var r="innerHTML";if(!w(n,r))return!1;var e=n[r];return""!==(e=t?e.trim():e)?e:null},b=function(n){return(n&&n.nodeName||"").toLowerCase()||null},g=function(n){return n.nextElementSibling||null},k=function(n){return n.parentNode||null},E=function(n,t){void 0===t&&(t=!0);var r="textContent";if(!w(n,r))return!1;var e=n[r];return""!==(e=t?e.trim():e)?e:null},H=function(n,t){return n.hasAttribute(t)},x=function(n){return null!==k(n)},w=function(n,t){return t in n},F=function(n,t){return n.removeAttribute(t),n},L=function(n){var t=k(n);return n.remove(),t},O=function(n,t,r){return!0===r&&(r=t),n.setAttribute(t,f(r)),n},S=function(n,t){return n.append(t),t},T=function(n,t,r){return n=i(n)?s.createElement(n):n,u(t)&&(r=t,t=!1),i(t)&&A(n,t),u(r)&&function(n,t){var r;for(var e in t)(r=t[e])||""===r||0===r?O(n,e,r):F(n,e)}(n,r),n},A=function(n,t,r){if(void 0===r&&(r=!0),null===t)return n;var e="innerHTML";return w(n,e)&&(n[e]=r?t.trim():t),n},C=function(n,t){return k(n).insertBefore(t,n),t},R=function(n){return T.apply(void 0,n)},q=a.history,D=a.location,M=s.currentScript,N=function(n){return n&&n.preventDefault()},B=function(n,t,r){t.removeEventListener(n,r)},I=function(n,t,r,e){void 0===e&&(e=!1),t.addEventListener(n,r,e)};function P(n,t){var r=this;return o(U[n])?(U[n].forEach((function(n){return n.apply(r,t)})),r):r}var U={};function $(n,t){if(!o(n))return U={},this;if(o(U[n]))if(o(t)){for(var r=0,e=U[n].length;r<e;++r)if(t===U[n][r]){U[n].splice(r,1);break}0===j&&delete U[n]}else delete U[n];return this}function J(n,t){return o(U[n])||(U[n]=[]),o(t)&&U[n].push(t),this}var G,K,X=function(n,t){return function(n){return r(n,RegExp)}(n)?n:(n=n.replace(/\//g,"\\/"),RegExp(n,o(t)?t:"g"))},_=function(n,t){return n.scrollLeft=t[0],n.scrollTop=t[1],n},z=function(n){return n.toLowerCase()},Q=function(n){return n.toUpperCase()},V=function(n){return n.length},W=function(n){return Object.keys(n)},Y=function t(r){if(n(r))return r.map((function(n){return t(n)}));if(e(r))return function(n,t){return void 0===t&&(t=10),t?parseInt(n,t):parseFloat(n)}(r);if(u(r)){for(var o in r)r[o]=t(r[o]);return r}return{false:!1,null:null,true:!0}[r]||r},Z="F3H",nn="GET",tn="document",rn="text",en="//"+D.hostname;function un(n){return pn(n)?"submit":"click"}function on(n){return n.split("#")[1]||""}function fn(n){for(var t,r,e,u={},o=m("link[rel=dns-prefetch],link[rel=preconnect],link[rel=prefetch],link[rel=preload],link[rel=prerender]",n),i=0,f=V(o);i<f;++i)dn(r=o[i])||(r.id=t=r.id||"F3H:"+bn(d(r,"href")||E(r)),u[t]=e=p(r),u[t][V(e)-1].href=r.href);return u}function cn(){return yn(D.href)}function sn(n){for(var t,r,e,u={},o=m("script",n),i=0,f=V(o);i<f;++i)vn(r=o[i])||(r.id=t=r.id||"F3H:"+bn(d(r,"src")||E(r)),u[t]=e=p(r),u[t][V(e)-1].src=r.src);return u}function an(n){for(var t,r,e,u={},o=m("link[rel=stylesheet],style",n),i=0,f=V(o);i<f;++i)hn(r=o[i])||(r.id=t=r.id||"F3H:"+bn(d(r,"href")||E(r)),u[t]=e=p(r),"link"===e[0]&&(u[t][V(e)-1].href=r.href));return u}function ln(n,t){return n?s.getElementById(n)||(t?s.getElementsByName(n)[0]:null):null}function pn(n){return"form"===b(n)}function dn(n){var t=z(Z);return H(n,"data-"+t)||H(n,t)?1:0}function vn(n){if(n.src&&M.src===n.src)return 1;var t=z(Z);return H(n,"data-"+t)||H(n,t)||X("\\bF3H\\b").test(E(n)||"")?1:0}function hn(n){var t=z(Z);return H(n,"data-"+t)||H(n,t)?1:0}function mn(n){return n.split("#")[0]}function yn(n){return n.replace(/\/+(?=[?&#]|$)/,"")}function bn(n){var t,r=V(n),e=0;if(0===r)return e;for(t=0;t<r;++t)e=(e<<5)-e+n.charCodeAt(t),e&=e;return e<1?-1*e:e}function gn(n){var t,r,e,u,o={},i=n.getAllResponseHeaders().trim().split(/[\r\n]+/);for(t in i)r=i[t].split(": "),e=z(r.shift()),z(u=r.join(": ")),o[e]=Y(u);return new Proxy(o,{get:function(n,t){return n[z(t)]||null},set:function(n,t,r){n[z(t)]=r}})}function kn(n,e){void 0===n&&(n=s),void 0===e&&(e={});var i,f=this;if(!r(f,kn))return new kn(n,e);if(o(n)&&(!1!==(i=n)&&!0!==i)&&!u(n)||(e=n,n=s),n.F3H)return f;f.state=e=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return Object.assign.apply(Object,[{}].concat(t))}(kn.state,!0===e?{cache:e}:e||{}),f.source=n;var c=P.bind(f),p=$.bind(f),d=J.bind(f);e.turbo&&(e.cache=!0);var v={},y=null,b=null,k=null,E=cn(),H=E,w={},F=null,O=D(e.sources),j=null,A=null;function D(n,r){E=cn();var u=m(n,r);if(t(e.is)){var o=[];return u.forEach((function(n){e.is.call(f,n,E)&&o.push(n)})),o}return u}function M(n){n!==cn()&&e.history&&q.pushState({},"",n)}function X(n,t,r){var u,o=function(n){return n===a}(n),i=e.history;if(nn!==t||n!==k||o){if(k=n,f.ref=yn(H=r),c("exit",[s,n]),e.cache){var p=v[yn(mn(r))];if(p)return f.lot=b=p[2],f.status=j=p[0],p[3]&&!o&&i&&dn(l),M(r),u=[p[1],n],p[3]&&(y=hn(u[0])),p[3]&&(A=En(u[0])),c("success",u),c(p[0],u),O=D(e.sources),p[3]&&(F=bn(u[0])),jn(u),void c("enter",u)}var d,h,m=Z(n,t,r,e.lot),g=m.upload,E=tn===m.responseType;return I("abort",m,(function(){x(),c("abort",[m.response,n])})),I("error",m,d=function(){x(),E&&!o&&i&&dn(l),u=[m.response,n],E&&(y=hn(u[0])),E&&(A=En(u[0])),c("error",u),O=D(e.sources),E&&(F=bn(u[0])),jn(u),c("enter",u)}),I("error",g,d),I("load",m,d=function(){if(x(),u=[m.response,n],h=m.responseURL,j>=300&&j<400){var t=yn(h);return v[t]&&delete v[t],c("success",u),c(j,u),void X(k=a,nn,h||r)}M(-1===r.indexOf("#")&&h||r),E&&(A=En(u[0])),c("success",u),c(j,u),E&&i&&dn(l),O=D(e.sources),E&&(F=bn(u[0])),jn(u),c("enter",u)}),I("load",g,d),I("progress",m,(function(n){x(),c("pull",n.lengthComputable?[n.loaded,n.total]:[0,-1])})),I("progress",g,(function(n){x(),c("push",n.lengthComputable?[n.loaded,n.total]:[0,-1])})),m}function x(){b=gn(m),j=m.status,nn===t&&e.cache&&j&&(v[yn(mn(r))]=[j,m.response,b,E]),f.lot=b,f.status=j}}function z(n){w[n]&&w[n][0]&&(w[n][0].abort(),delete w[n])}function Y(){for(var n in w)z(n)}function Z(n,r,o,i){o=t(e.ref)?e.ref.call(f,n,o):o;var c,s=new XMLHttpRequest,a=Q(o.split(/[?&#]/)[0].split("/").pop().split(".")[1]||""),l=e.types[a]||e.type||rn;if(t(l)&&(l=l.call(f,o)),s.responseType=l,s.open(r,o,!0),u(i))for(c in i)s.setRequestHeader(c,i[c]);return s.send("POST"===r?new FormData(n):null),s}function en(n,t){var r=Z(n,nn,t);I("load",r,(function(){200===(j=r.status)&&(v[yn(mn(t))]=[j,r.response,gn(r),tn===r.responseType])}))}function dn(n){if(n){var t=function(n){return[n.offsetLeft,n.offsetTop]}(n);_(G,t),_(l,t)}}function vn(t,r,e,u){var o,i,f,c=e(t),s={};for(o in r)(i=h("#"+o.replace(/[:.]/g,"\\$&"),n))&&(s[o]=g(i)),c[o]||(delete r[o],L(ln(o)));for(o in c)r[o]||(r[o]=f=c[o],s[o]&&x(s[o])?C(s[o],R(f)):u&&S(u,R(f)));return r}function hn(n){return vn(n,y,fn,K)}function bn(n){return vn(n,F,sn,G)}function En(n){return vn(n,A,an,K)}function Hn(){I("keydown",s,On),I("keyup",s,Sn),G=s.body,K=s.head,f.links=y=fn(),f.scripts=F=sn(),f.styles=A=an(),jn([s,a]),e.cache&&en(a,cn())}function xn(n){if(Y(),!Ln){var t,r=this,u=r.href,o=r.action,i=yn(u||o),f=Q(r.method||nn);nn===f&&(pn(r)&&(t=new URLSearchParams(new FormData(r))+"",i=i.split(/[?&#]/)[0]+(t?"?"+t:"")),e.turbo&&M(i)),w[i]=[X(r,f,i),r],N(n)}}function wn(n){dn(ln(on(cn()),1)),N(n)}function Fn(){var n=this,t=n.href;v[yn(mn(t))]||en(n,t),B("mousemove",n,Fn)}kn.instances[n.id||n.name||function(n){return V(W(n))}(kn.instances)]=f,n.F3H=1;var Ln=!1;function On(n){Ln=n.ctrlKey}function Sn(){Ln=!1}function Tn(n){E=cn(),Y(),on(E)&&mn(H)===mn(E)||(w[E]=[X(a,nn,E),a])}function jn(t){var r=e.turbo;O.forEach((function(n){var t,e,u;I(un(n),n,xn),pn(n)?(t=n,e=T("input",{type:"hidden"}),u=m("[name][type=submit][value]",t),S(t,e),u.forEach((function(n){I("click",n,(function(){e.name=this.name,e.value=this.value}))}))):r&&function(n){I("mousemove",n,Fn)}(n)})),function(t){if(U.focus)c("focus",t);else{var r=h("[autofocus]",n);r&&r.focus()}}(t),function(n){U.scroll?c("scroll",n):dn(ln(on(cn()),1))}(t)}return f.abort=function(n){return n?w[n]&&z(n):Y(),f},f.caches=v,f.fetch=function(n,t,r){return Z(r,t,n)},f.fire=c,f.hooks=U,f.links=y,f.lot=null,f.off=p,f.on=d,f.ref=null,f.scripts=F,f.state=e,f.styles=A,f.status=null,f.pop=function(){return n.F3H?(delete n.F3H,O.forEach((function(n){I(un(n),n,xn)})),B("DOMContentLoaded",a,Hn),B("hashchange",a,wn),B("keydown",s,On),B("keyup",s,Sn),B("popstate",a,Tn),c("pop",[s,a]),f.abort()):f},I("DOMContentLoaded",a,Hn),I("hashchange",a,wn),I("popstate",a,Tn),f}return kn.instances={},kn.state={cache:!1,history:!0,is:function(n,t){var r=n.target,e=d(n,"href")||d(n,"action")||"",u=n.href||n.action||"";return(!r||"_self"===r)&&("#"!==e[0]&&!/^(data|javascript|mailto):/.test(e)&&((!on(u)||mn(t)!==mn(u))&&(""===e||0===e.search(/[.\/?]/)||0===e.indexOf(en)||0===e.indexOf(D.protocol+en)||-1===e.indexOf("://"))))},lot:{"x-requested-with":Z},ref:function(n,t){return t},sources:"a[href],form",turbo:!1,type:tn,types:{"":tn,CSS:rn,JS:rn,JSON:"json"}},kn.version="1.1.10",kn}));